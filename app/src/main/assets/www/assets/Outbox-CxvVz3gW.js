import{Q as h}from"./QImg-BMvxJu3S.js";import{Q as _}from"./QBadge-Bjfo5tRO.js";import{_ as v,aY as b,b8 as k,b9 as Q,b2 as x,ba as y,as as L,at as w,Q as d,S as n,a6 as e,a5 as a,a4 as c,a9 as f,aa as p,av as M,a7 as C,ad as l,ab as i,R as I,a8 as A,ah as B,ay as N,aw as q,aE as D,aB as U}from"./index-Bl2lQPd7.js";import{Q as H,a as m}from"./QItem-De3v03wU.js";import{Q as o}from"./QItemLabel-BkJiB6aE.js";import{Q as O}from"./QList-CMzNTEGD.js";import{q as R}from"./date-C1Mon-Jj.js";import"./format-IcNrutKL.js";const T={computed:{...w({user:"user/user",config:"user/config",links:"user/nav",current:"user/current",messagesList:"message/outbox",darkMode:"darkMode"}),messages(){return this.messagesList&&this.messagesList.data?this.messagesList.data:[]},eleve(){if(this.current&&this.current.hasOwnProperty("eleve"))return this.current.eleve},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee},dark:{get(){return this.darkMode},set(s){this.toggleDarkMode()}}},methods:{...L({getConfig:"user/getConfig",getMessages:"message/getOutbox"}),LetterAvatar:y,toNow:x,fileIcon:Q,openURL:k,pjUrl:b,personAvatar(s){return U(s)},sub(s){return this.$cleanHtml(s,{allowedTags:["b","i","em","strong","a"]})},date(s){return R.formatDate(s*1e3)}},mounted(){this.getMessages({page:1})}},V=["onClick"];function j(s,P,S,E,z,r){return n(),d(D,{style:{margin:"0 -8px"},flat:""},{default:e(()=>[a(O,null,{default:e(()=>[(n(!0),c(f,null,p(r.messages,(t,g)=>M((n(),d(H,{key:g,clickable:"",to:"/messages/view/"+t.id},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(C,null,{default:e(()=>[a(h,{src:r.personAvatar(t.sender),"placeholder-src":r.LetterAvatar(t.sender.nom)},null,8,["src","placeholder-src"]),a(_,{floating:"",transparent:"",color:"secondary"},{default:e(()=>[l(i(t.type_sender),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(m,null,{default:e(()=>[a(o,{lines:"1"},{default:e(()=>[A("span",null,i(t.sender.nom)+" "+i(t.sender.prenom),1)]),_:2},1024),a(o,{lines:"1"},{default:e(()=>[l(i(t.objet),1)]),_:2},1024),a(o,{caption:"",lines:"1",innerHTML:r.sub(t.message)},null,8,["innerHTML"]),t.fichiers.length?(n(),d(o,{key:0,lines:"1"},{default:e(()=>[(n(!0),c(f,null,p(t.fichiers,(u,F)=>(n(),c("div",{outline:"",color:"grey-9",onClick:B(G=>r.openURL(r.pjUrl(u)),["prevent"]),class:"ellipsis rounded-borders q-mr-xs q-pa-xs",style:{"max-width":"40%",display:"inline-block",border:"1px solid var(--q-primary)"}},[a(N,{name:"img:"+r.fileIcon(u.fichier),size:"14px"},null,8,["name"]),l(" "+i(u.fichier),1)],8,V))),256))]),_:2},1024)):I("",!0)]),_:2},1024),a(m,{side:"",top:""},{default:e(()=>[a(o,{caption:""},{default:e(()=>[l(i(r.toNow(t.created_at*1e3)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"])),[[q]])),128))]),_:1})]),_:1})}const ae=v(T,[["render",j]]);export{ae as default};
