import{_ as f,ar as _,aj as x,cT as p,c$ as g,aW as y,a4 as o,S as a,a5 as r,R as d,a6 as u,av as k,Q as h,a3 as Q,ad as U,ab as m,a9 as w,b9 as C,aB as V,b2 as T,as as B,at as D,ag as I,a8 as c,aa as P,ay as q,aD as N,aC as j,aY as z,b5 as F}from"./index-Bl2lQPd7.js";import{Q as M}from"./QImg-BMvxJu3S.js";import{f as L}from"./find-DmKWGD7T.js";import{Q as O}from"./QToolbarTitle-C8APieXG.js";import{Q as R}from"./QToolbar-DR-_wX4W.js";import{Q as S}from"./QVideo-CbIcEHVn.js";import{C as A}from"./ClosePopup-BY_YGFBZ.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./_xfBase-ZXVHuZFu.js";import"./_curry1-CPMemvwC.js";const E={props:["item"],methods:{openURL:_,photo(e){return e.type===1?e.lien.includes("http")?e.lien:g(y("api")+e.lien):"https://img.youtube.com/vi/"+p(e.lien)+"/hqdefault.jpg"},youtube(e){return"https://www.youtube.com/embed/"+p(e)+"?rel=0"}},mounted(){this.$nextTick(()=>{x.listen(".zoom img")})}},G={key:0,class:"full-width zoom",style:{overflow:"visible"}},W=["src"];function Y(e,n,s,b,l,t){return a(),o(w,null,[r(R,{class:"text-white fixed-top"},{default:u(()=>[k(r(Q,{flat:"",dense:"",icon:"arrow_back"},null,512),[[A]]),s.item?(a(),h(O,{key:0},{default:u(()=>[U(m(s.item.titre),1)]),_:1})):d("",!0)]),_:1}),s.item?(a(),o("div",G,[s.item.type===1?(a(),o("img",{key:0,src:t.photo(s.item),class:"full-width"},null,8,W)):(a(),h(S,{key:1,ratio:16/9,src:t.youtube(s.item.lien),frameborder:"0",allowfullscreen:"allowfullscreen"},null,8,["src"]))])):d("",!0)],64)}const H=f(E,[["render",Y]]),J={data(){return{type:0,show:!1,item:null,icon:"videocam"}},components:{Preview:H},computed:{...D({user:"user/user",config:"user/config",current:"user/current",data:"media/data"}),media(){if(this.data){let e=L(n=>n.id===parseInt(this.$route.params.id),this.data.data);if(console.log(e),e)return e}return null},eleve(){if(this.current&&this.current.hasOwnProperty("eleve"))return this.current.eleve},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee}},methods:{...B({getMedia:"media/getData"}),openURL:_,toNow:T,userPhotoUrl:V,fileIcon:C,view(e){this.item=e,this.show=!0},photo(e){return e.type===1?e.lien.includes("http")?e.lien:g(y("api")+e.lien):"https://img.youtube.com/vi/"+p(e.lien)+"/hqdefault.jpg"},isImage(e){return F(this.fileUrl(e))},getData(){this.getMedia({page:this.data.current_page,filter:{classe:this.annee.pivot.idclasse,type:this.type}})},fileUrl(e){return z(e)}},mounted(){this.type=this.$route.params.type==="photos"?1:0,this.icon=this.$route.params.type==="photos"?"image":"videocam",this.setTitle("Multimedia")}},K={class:"q-pt-xs q-pb-lg text-center"},X={style:{"font-weight":"500"},class:"q-mb-sm"},Z={class:"row"},$={class:"col-6 col-md-4"},ee={key:0,style:{padding:"2px 5px"},class:"absolute-bottom text-center"},te={style:{padding:"0 5px","font-size":"2rem"},class:"absolute-top-right text-right bg-transparent"};function ae(e,n,s,b,l,t){const v=I("preview");return t.media?(a(),h(j,{key:0,padding:"",class:"page-content"},{default:u(()=>[c("div",K,[c("div",X,m(t.media.titre),1),c("div",null,m(t.media.description),1)]),c("div",Z,[(a(!0),o(w,null,P(t.media.meta.media,(i,se)=>(a(),o("div",$,[r(M,{src:t.photo(i),fit:"cover",ratio:16/9,onClick:ie=>t.view(i)},{default:u(()=>[i.titre?(a(),o("div",ee,m(i.titre),1)):d("",!0),c("div",te,[r(q,{name:l.icon},null,8,["name"])])]),_:2},1032,["src","onClick"])]))),256))]),r(N,{modelValue:l.show,"onUpdate:modelValue":n[0]||(n[0]=i=>l.show=i)},{default:u(()=>[r(v,{item:l.item},null,8,["item"])]),_:1},8,["modelValue"])]),_:1})):d("",!0)}const fe=f(J,[["render",ae]]);export{fe as default};
