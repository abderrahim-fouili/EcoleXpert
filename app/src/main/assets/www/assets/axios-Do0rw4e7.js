import{v as M,w as O,x as E,y as P,z as F,A as h,B as c,C as N,D as $,E as _,F as m,G as D,H as Q,I as G,n as I,J as j,p as f,f as g,K as C,L as q}from"./index-Bl2lQPd7.js";import{b as J}from"./format-IcNrutKL.js";const K='<g><path fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10" d="M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"></path><clipPath id="uil-hourglass-clip1"><rect x="15" y="20" width="70" height="25"><animate attributeName="height" from="25" to="0" dur="1s" repeatCount="indefinite" values="25;0;0" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="20" to="45" dur="1s" repeatCount="indefinite" values="20;45;45" keyTimes="0;0.5;1"></animate></rect></clipPath><clipPath id="uil-hourglass-clip2"><rect x="15" y="55" width="70" height="25"><animate attributeName="height" from="0" to="25" dur="1s" repeatCount="indefinite" values="0;25;25" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="80" to="55" dur="1s" repeatCount="indefinite" values="80;55;55" keyTimes="0;0.5;1"></animate></rect></clipPath><path d="M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z" clip-path="url(#uil-hourglass-clip1)" fill="currentColor"></path><path d="M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z" clip-path="url(#uil-hourglass-clip2)" fill="currentColor"></path><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" repeatCount="indefinite" dur="1s" values="0 50 50;0 50 50;180 50 50" keyTimes="0;0.7;1"></animateTransform></g>',V=M({name:"QSpinnerHourglass",props:O,setup(t){const{cSize:e,classes:n}=E(t);return()=>P("svg",{class:n.value,width:e.value,height:e.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:K})}}),w=XMLHttpRequest,S=w.prototype.open,X=["top","right","bottom","left"];let b=[],d=0;function Y({p:t,pos:e,active:n,horiz:i,reverse:r,dir:l}){let a=1,s=1;return i===!0?(r===!0&&(a=-1),e==="bottom"&&(s=-1),{transform:`translate3d(${a*(t-100)}%,${n?0:s*-200}%,0)`}):(r===!0&&(s=-1),e==="right"&&(a=-1),{transform:`translate3d(${n?0:l*a*-200}%,${s*(t-100)}%,0)`})}function W(t,e){return typeof e!="number"&&(t<25?e=Math.random()*3+3:t<65?e=Math.random()*3:t<85?e=Math.random()*2:t<99?e=.6:e=0),J(t+e,0,100)}function Z(t){d++,b.push(t),!(d>1)&&(w.prototype.open=function(e,n){const i=[],r=()=>{b.forEach(a=>{(a.hijackFilter.value===null||a.hijackFilter.value(n)===!0)&&(a.start(),i.push(a.stop))})},l=()=>{i.forEach(a=>{a()})};this.addEventListener("loadstart",r,{once:!0}),this.addEventListener("loadend",l,{once:!0}),S.apply(this,arguments)})}function ee(t){b=b.filter(e=>e.start!==t),d=Math.max(0,d-1),d===0&&(w.prototype.open=S)}const te=M({name:"QAjaxBar",props:{position:{type:String,default:"top",validator:t=>X.includes(t)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,hijackFilter:Function},emits:["start","stop"],setup(t,{emit:e}){const{proxy:n}=F(),i=h(0),r=h(!1),l=h(!0);let a=0,s=null,y;const H=c(()=>`q-loading-bar q-loading-bar--${t.position}`+(t.color!==void 0?` bg-${t.color}`:"")+(l.value===!0?"":" no-transition")),L=c(()=>t.position==="top"||t.position==="bottom"),U=c(()=>L.value===!0?"height":"width"),A=c(()=>{const o=r.value,u=Y({p:i.value,pos:t.position,active:o,horiz:L.value,reverse:n.$q.lang.rtl===!0&&["top","bottom"].includes(t.position)?t.reverse===!1:t.reverse,dir:n.$q.lang.rtl===!0?-1:1});return u[U.value]=t.size,u.opacity=o?1:0,u}),z=c(()=>r.value===!0?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":i.value}:{"aria-hidden":"true"});function x(o=300){const u=y;return y=Math.max(0,o)||0,a++,a>1?(u===0&&o>0?k():s!==null&&u>0&&o<=0&&(clearTimeout(s),s=null),a):(s!==null&&clearTimeout(s),e("start"),i.value=0,s=setTimeout(()=>{s=null,l.value=!0,o>0&&k()},r._value===!0?500:1),r._value!==!0&&(r.value=!0,l.value=!1),a)}function T(o){return a>0&&(i.value=W(i.value,o)),a}function R(){if(a=Math.max(0,a-1),a>0)return a;s!==null&&(clearTimeout(s),s=null),e("stop");const o=()=>{l.value=!0,i.value=100,s=setTimeout(()=>{s=null,r.value=!1},1e3)};return i.value===0?s=setTimeout(o,1):o(),a}function k(){i.value<100&&(s=setTimeout(()=>{s=null,T(),k()},y))}let B;return N(()=>{t.skipHijack!==!0&&(B=!0,Z({start:x,stop:R,hijackFilter:c(()=>t.hijackFilter||null)}))}),$(()=>{s!==null&&clearTimeout(s),B===!0&&ee(x)}),Object.assign(n,{start:x,stop:R,increment:T}),()=>P("div",{class:H.value,style:A.value,...z.value})}}),v=h(null),p=_({isActive:!1},{start:m,stop:m,increment:m,setDefaults:m,install({$q:t,parentApp:e}){if(t.loadingBar=this,this.__installed===!0){t.config.loadingBar!==void 0&&this.setDefaults(t.config.loadingBar);return}const n=h(t.config.loadingBar!==void 0?{...t.config.loadingBar}:{});function i(){p.isActive=!0}function r(){p.isActive=!1}const l=D("q-loading-bar");Q({name:"LoadingBar",devtools:{hide:!0},setup:()=>()=>P(te,{...n.value,onStart:i,onStop:r,ref:v})},e).mount(l),Object.assign(this,{start(a){v.value.start(a)},stop(){v.value.stop()},increment(){v.value.increment.apply(null,arguments)},setDefaults(a){G(a)===!0&&Object.assign(n.value,a)}})}}),ie=I(({app:t})=>{j.interceptors.request.use(function(e){return f.getters.bar?p.start():g.show({backgroundColor:"transparent",spinnerColor:"primary",spinner:V}),e},function(e){return p.stop(),g.hide(),console.log("request -",e),Promise.reject(e)}),j.interceptors.response.use(function(e){return f.getters.bar?p.stop():g.hide(),f.commit("online"),(e.hasOwnProperty("request")&&e.hasOwnProperty("requestURL")&&e.hasOwnProperty("responseURL")&&e.request.requestURL!==e.request.responseURL||e?.data.redirected)&&C(e.request.responseURL,e),e},function(e){return f.getters.bar?p.stop():g.hide(),e.response?(e.response.status,e.response.data):f.commit("offline"),console.log("response -",e.response),(q(e)&&e.response&&e.response.request.hasOwnProperty("requestURL")&&e.response.request.hasOwnProperty("responseURL")&&e.response.request.requestURL!==e.response.request.responseURL||q(e)&&e.response?.data.message==="redirect")&&C(e.response.request.responseURL,e.response,!0),q(e)&&e.response?.data.message==="Unauthenticated."&&C("unauthenticated",e.response,!0),Promise.reject(e)}),t.config.globalProperties.$axios=j});export{ie as default};
