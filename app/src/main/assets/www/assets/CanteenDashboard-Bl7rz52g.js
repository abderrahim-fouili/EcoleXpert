const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CanteenTicketHoldersReport-BMzB93DC.js","./date-C1Mon-Jj.js","./index-Bl2lQPd7.js","./index-B-uS9A6y.css","./format-IcNrutKL.js","./CanteenTicketHoldersReport-CBwpjNn1.css","./CanteenDetailedStatsReport-CeLF3acC.js","./CanteenDetailedStatsReport-npWWJIgR.css"])))=>i.map(i=>d[i]);
import{_ as oe,aO as ue,A as z,B as m,d8 as me,a4 as p,S as i,Q as w,a5 as s,a8 as t,b7 as ve,a6 as l,ab as b,ay as $,R as v,ac as x,ad as fe,aF as A,aS as Q,aE as q,aP as ge,aM as Y,C as pe,bv as _e,a3 as E,a2 as U,av as H,a$ as G,aC as ye,N as X,b0 as J}from"./index-Bl2lQPd7.js";import{Q as K}from"./QDate-C_jC-zMt.js";import{Q as Z}from"./QPopupProxy-CQ30ymZI.js";import{C as ee}from"./ClosePopup-BY_YGFBZ.js";import{q as te}from"./date-C1Mon-Jj.js";import{Q as he}from"./QBanner-xBGiroIy.js";import{Q as be}from"./QChip-C9OfA2gn.js";import{Q as T}from"./QTable-D-OlObRI.js";import{Q as V}from"./QExpansionItem-EMhshZ_3.js";import{u as xe,i as ke,a as we,b as Se,c as Ce,H as B}from"./index.esm.min-FpMw1SSI.js";import{i as Ae}from"./install-C7aL04A7.js";import{b as qe,i as $e,a as De}from"./install-qCEEq-uE.js";import{E as se}from"./ExportControls-UOL0zNKZ.js";import{u as Pe}from"./composables-CAkrP3jA.js";import"./use-render-cache-DLxPkVnQ.js";import"./use-datetime-hbLWgGn4.js";import"./format-IcNrutKL.js";import"./QMenu-BNr9Tzvf.js";import"./position-engine-o8Q2RudZ.js";import"./selection-DaBtDCZ0.js";import"./QVirtualScroll-CENgsPEr.js";import"./QList-CMzNTEGD.js";import"./QSelect-DchnWyXK.js";import"./QItem-De3v03wU.js";import"./QItemLabel-BkJiB6aE.js";import"./rtl-DFPa-2ov.js";import"./QLinearProgress-DW1NPbfx.js";import"./QSlideTransition-CrdUnXBf.js";import"./QTooltip-r7WoEuzy.js";import"./_commonjsHelpers-D6-XlEtG.js";const Te={class:"q-pa-md"},Ve={key:0,class:"text-center q-py-xl"},ze={key:2,class:"text-center text-grey-7 q-py-xl"},Qe={class:"q-mt-sm text-body2"},Ee={key:3},Re={class:"q-mb-md"},Fe={key:0,class:"text-caption text-grey-7"},Le={key:0,class:"q-mb-lg"},Me={class:"row q-col-gutter-lg q-mb-lg"},Ne={class:"col-12 col-sm-6 col-md-4"},Ie={class:"row items-center no-wrap"},We={class:"col"},Be={class:"text-h3 font-bold"},Oe={class:"col-auto"},je={class:"col-12 col-sm-6 col-md-4"},Ye={class:"row items-center no-wrap"},Ue={class:"col"},He={class:"text-h4 font-bold"},Ge={class:"col-auto"},Xe={class:"col-12 col-sm-6 col-md-4"},Je={class:"row items-center no-wrap"},Ke={class:"col"},Ze={class:"text-h4 font-bold"},et={class:"col-auto"},tt={key:1,class:"q-mt-xl"},st={class:"row q-col-gutter-lg"},at={class:"col-12 col-md-6"},lt={class:"col-12 col-md-6"},ot={key:2,class:"q-mt-xl"},o="#113e7f",_="#85b9e8",O="#f0f7fc",nt="#dfe6f0",ae="#0B2A52",R="#4A6A9F",le="#A8D0F0",it={__name:"CanteenStatsDisplay",props:{stats:{type:Object,default:null},loading:{type:Boolean,default:!1},error:{type:String,default:null},noDataMessage:{type:String,default:null}},setup(e){xe([qe,$e,ke,Ae,we,Se,Ce,De]);const n=ue(),{darken:I}=me,c=e,F=r=>r==null||isNaN(r)?"N/A":new Intl.NumberFormat("fr-MA",{style:"currency",currency:"MAD",minimumFractionDigits:2}).format(r),D=z([{name:"name",label:"Nom Complet",field:"name",align:"left",sortable:!0,style:"width: 70%"},{name:"class",label:"Classe",field:"class",align:"left",sortable:!0,style:"width: 30%"}]),u=z([{name:"name",label:"Nom Complet",field:"name",align:"left",sortable:!0}]),f=m(()=>c.stats&&!c.loading&&!c.error),S=m(()=>{if(!c.stats?.serving_summary)return{};const r=c.stats.serving_summary.total_served??0,a=c.stats.serving_summary.total_expected??0,k=Math.max(0,a-r),g=a>0?Math.round(r/a*100):0,h=n.dark.isActive?ae:O,W=n.dark.isActive?_:o,L=n.dark.isActive?I(o,15):"#E0E0E0";return{backgroundColor:"transparent",tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)",backgroundColor:"rgba(0,0,0,0.8)",borderColor:"#555",textStyle:{color:"#fff"}},legend:{show:!1},graphic:{type:"text",left:"center",top:"42%",style:{text:`${r} / ${a}
Servis (${g}%)`,textAlign:"center",fill:W,fontSize:20,fontWeight:"700",lineHeight:26}},series:[{name:"État du service",type:"pie",radius:["70%","85%"],center:["50%","50%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:h,borderWidth:4},label:{show:!1},labelLine:{show:!1},emphasis:{scale:!0,scaleSize:8,itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.3)"}},data:[{value:r,name:"Servis",itemStyle:{color:n.dark.isActive?le:_}},{value:k,name:"Restants",itemStyle:{color:L}}].filter(M=>M.value>=0)}]}}),P=m(()=>{if(!f.value||!c.stats.detailed_lists||!c.stats.serving_summary)return{};const r=c.stats.detailed_lists?.subscribed_students?.length??0,a=c.stats.detailed_lists?.ticket_students?.length??0,k=c.stats.serving_summary.teaching_staff_served??0,g=c.stats.serving_summary.non_teaching_staff_served??0;return{title:{text:"Composition des Servis",left:"center",textStyle:{fontSize:16,color:o,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},backgroundColor:"rgba(0,0,0,0.7)",borderColor:"#333",textStyle:{color:"#fff"}},legend:{bottom:0,type:"scroll",textStyle:{color:n.dark.isActive?"#ccc":o}},grid:{left:"3%",right:"4%",bottom:"12%",top:"15%",containLabel:!0},xAxis:{type:"value",axisLine:{lineStyle:{color:n.dark.isActive?_:R}},axisLabel:{color:n.dark.isActive?"#ccc":o}},yAxis:{type:"category",data:[""],axisLine:{lineStyle:{color:n.dark.isActive?_:R}},axisLabel:{color:n.dark.isActive?"#ccc":o}},series:[{name:"Élèves Abonnés",type:"bar",data:[r],itemStyle:{color:_},barMaxWidth:40},{name:"Élèves Tickets",type:"bar",data:[a],itemStyle:{color:o},barMaxWidth:40},{name:"Professeurs",type:"bar",data:[k],itemStyle:{color:le},barMaxWidth:40},{name:"Administrateurs",type:"bar",data:[g],itemStyle:{color:R},barMaxWidth:40}].filter(h=>h.data[0]>0)}}),y=m(()=>{if(!f.value||!c.stats.staff_tickets_summary)return{};const r=c.stats.staff_tickets_summary.served_paid_count??0,a=c.stats.staff_tickets_summary.served_unpaid_count??0;return r===0&&a===0?{title:{text:"Tickets Staff (Payé/Non Payé)",subtext:"Aucune donnée",left:"center",top:"center",textStyle:{fontSize:16,color:o,fontWeight:"normal"},subtextStyle:{fontSize:14,color:"#999"}},series:[]}:{title:{text:"Tickets Staff (Payé/Non Payé)",left:"center",textStyle:{fontSize:16,color:o,fontWeight:"normal"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)",backgroundColor:"rgba(0,0,0,0.7)",borderColor:"#333",textStyle:{color:"#fff"}},legend:{orient:"vertical",left:"left",top:"middle",textStyle:{color:n.dark.isActive?"#ccc":o}},series:[{name:"Tickets staff",type:"pie",radius:["40%","65%"],center:["60%","55%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:6,borderColor:n.dark.isActive?"#424242":"#fff",borderWidth:2},label:{show:!0,position:"outside",formatter:`{b}
{c} ({d}%)`,color:n.dark.isActive?"#ddd":o},labelLine:{show:!0,smooth:.2,length:10,length2:15,lineStyle:{color:n.dark.isActive?_:R}},emphasis:{label:{show:!0,fontSize:14,fontWeight:"600"},scaleSize:10},data:[{value:r,name:"Payé",itemStyle:{color:_}},{value:a,name:"Non Payé",itemStyle:{color:o}}].filter(k=>k.value>0)}]}});return(r,a)=>(i(),p("div",Te,[e.loading?(i(),p("div",Ve,[s(ve,{color:o.replace("#",""),size:"3.5em"},null,8,["color"]),a[0]||(a[0]=t("div",{class:"q-mt-md text-grey-8"},"Chargement des statistiques...",-1))])):e.error?(i(),w(he,{key:1,"inline-actions":"",class:"text-white bg-red-6 q-mb-lg shadow-2 rounded-lg"},{avatar:l(()=>[s($,{name:"error_outline",size:"md"})]),default:l(()=>[a[1]||(a[1]=t("div",{class:"text-subtitle1"},"Erreur",-1)),t("div",null,b(e.error),1)]),_:1})):e.stats?(i(),p("div",Ee,[t("div",Re,[t("div",{class:"text-h5 q-mb-xs",style:x({color:o})}," Statistiques pour : "+b(e.stats.date||(e.stats.date_range?`${e.stats.date_range.start} au
          ${e.stats.date_range.end}`:e.stats.program?`Programme du ${e.stats.program.date}`:"Période Inconnue")),5),e.stats.program?(i(),p("div",Fe," Description: "+b(e.stats.program.description||"N/A")+" (ID: "+b(e.stats.program.id)+") ",1)):v("",!0)]),e.stats.message?(i(),p("div",Le,[s(be,{outline:"",color:o.replace("#",""),"text-color":o.replace("#",""),icon:"sym_o_info"},{default:l(()=>[fe(b(e.stats.message),1)]),_:1},8,["color","text-color"])])):v("",!0),s(q,{flat:"",class:"rounded-lg q-mb-xl shadow-2 main-chart-card",style:x({backgroundColor:Q(n).dark.isActive?ae:O})},{default:l(()=>[s(A,{class:"q-pa-md"},{default:l(()=>[s(Q(B),{class:"chart",option:S.value,autoresize:"",style:{height:"250px"}},null,8,["option"])]),_:1})]),_:1},8,["style"]),t("div",{class:"text-h6 q-mt-xl q-mb-md",style:x({color:o})},"Aperçu Général",4),t("div",Me,[t("div",Ne,[s(q,{class:"rounded-lg h-full text-white shadow-3 stat-card-hover",style:x({backgroundColor:o})},{default:l(()=>[s(A,{class:"q-pa-lg"},{default:l(()=>[t("div",Ie,[t("div",We,[t("div",Be,b(e.stats.serving_summary?.total_served??"N/A"),1),a[3]||(a[3]=t("div",{class:"text-subtitle1 opacity-80"},"Total Servi",-1))]),t("div",Oe,[s($,{name:"sym_o_restaurant",size:"3.5em",class:"opacity-50"})])])]),_:1})]),_:1},8,["style"])]),t("div",je,[s(q,{class:"rounded-lg h-full shadow-3 stat-card-hover",style:x({backgroundColor:_})},{default:l(()=>[s(A,{class:"q-pa-lg",style:x({color:o})},{default:l(()=>[t("div",Ye,[t("div",Ue,[t("div",He,b(F(e.stats.staff_tickets_summary?.total_tarif_reserved+e.stats.detailed_lists?.ticket_students_total_tarif)),1),a[4]||(a[4]=t("div",{class:"text-subtitle2 opacity-80"},"Tickets Réservés (Valeur)",-1))]),t("div",Ge,[s($,{name:"sym_o_bookmark_added",size:"3.2em",class:"opacity-50"})])])]),_:1},8,["style"])]),_:1},8,["style"])]),t("div",Xe,[s(q,{class:"rounded-lg h-full text-white shadow-3 stat-card-hover",style:x({backgroundColor:R})},{default:l(()=>[s(A,{class:"q-pa-lg"},{default:l(()=>[t("div",Je,[t("div",Ke,[t("div",Ze,b(F(e.stats.total_revenue_from_tickets)),1),a[5]||(a[5]=t("div",{class:"text-subtitle2 opacity-80"},"Tickets Payés (Revenu)",-1))]),t("div",et,[s($,{name:"sym_o_payments",size:"3.2em",class:"opacity-50"})])])]),_:1})]),_:1},8,["style"])])]),f.value&&e.stats.serving_summary?.total_served>0?(i(),p("div",tt,[t("div",{class:"text-h6 q-mb-md",style:x({color:o})},"Graphiques Détaillés",4),t("div",st,[t("div",at,[s(q,{flat:"",bordered:"",class:"rounded-lg shadow-1"},{default:l(()=>[s(A,null,{default:l(()=>[s(Q(B),{option:P.value,autoresize:"",style:{height:"350px"}},null,8,["option"])]),_:1})]),_:1})]),t("div",lt,[s(q,{flat:"",bordered:"",class:"rounded-lg shadow-1"},{default:l(()=>[s(A,null,{default:l(()=>[s(Q(B),{option:y.value,autoresize:"",style:{height:"350px"}},null,8,["option"])]),_:1})]),_:1})])])])):v("",!0),e.stats.detailed_lists?(i(),p("div",ot,[t("div",{class:"text-h6 q-mb-md",style:x({color:o})},"Listes Détaillées des Personnes Servies",4),e.stats.detailed_lists.subscribed_students&&e.stats.detailed_lists.subscribed_students.length>0?(i(),w(V,{key:0,icon:"sym_o_person_check",label:`Élèves Abonnés Servis (${e.stats.detailed_lists.subscribed_students.length})`,"header-style":{backgroundColor:O,color:o,fontWeight:"600"},class:"q-mb-md rounded-lg shadow-1","default-opened":"","expand-icon-class":`text-${o.replace("#","")}`},{default:l(()=>[s(T,{dense:"",flat:"",rows:e.stats.detailed_lists.subscribed_students,columns:D.value,"row-key":"name",pagination:{rowsPerPage:10},"no-data-label":"Aucun élève abonné servi."},null,8,["rows","columns"])]),_:1},8,["label","header-style","expand-icon-class"])):v("",!0),e.stats.detailed_lists.ticket_students&&e.stats.detailed_lists.ticket_students.length>0?(i(),w(V,{key:1,icon:"sym_o_receipt_long",label:`Élèves avec Ticket Servis (${e.stats.detailed_lists.ticket_students.length})`,"header-style":{backgroundColor:o,color:"#FFFFFF",fontWeight:"600"},class:"q-mb-md rounded-lg shadow-1","default-opened":"","expand-icon-class":"text-white"},{default:l(()=>[s(T,{dense:"",flat:"",rows:e.stats.detailed_lists.ticket_students,columns:D.value,"row-key":"name",pagination:{rowsPerPage:10},"no-data-label":"Aucun élève avec ticket servi."},null,8,["rows","columns"])]),_:1},8,["label","header-style"])):v("",!0),e.stats.detailed_lists.manual_students&&e.stats.detailed_lists.manual_students.length>0?(i(),w(V,{key:2,icon:"sym_o_person_add",label:`Élèves Ajoutés Manuellement Servis (${e.stats.detailed_lists.manual_students.length})`,"header-style":{backgroundColor:nt,color:o,fontWeight:"600"},class:"q-mb-md rounded-lg shadow-1","default-opened":"","expand-icon-class":`text-${o.replace("#","")}`},{default:l(()=>[s(T,{dense:"",flat:"",rows:e.stats.detailed_lists.manual_students,columns:D.value,"row-key":"name",pagination:{rowsPerPage:10},"no-data-label":"Aucun élève ajouté manuellement servi."},null,8,["rows","columns"])]),_:1},8,["label","header-style","expand-icon-class"])):v("",!0),e.stats.detailed_lists.other_students&&e.stats.detailed_lists.other_students.length>0?(i(),w(V,{key:3,icon:"help_outline",label:`Autres Élèves Servis (${e.stats.detailed_lists.other_students.length})`,"header-class":"bg-grey-2 text-grey-8 font-bold",class:"q-mb-md rounded-lg shadow-1","expand-icon-class":"text-grey-8"},{default:l(()=>[s(T,{dense:"",flat:"",rows:e.stats.detailed_lists.other_students,columns:D.value,"row-key":"name",pagination:{rowsPerPage:10},"no-data-label":"Aucun autre élève servi."},null,8,["rows","columns"])]),_:1},8,["label"])):v("",!0),e.stats.detailed_lists.served_staff_paid&&e.stats.detailed_lists.served_staff_paid.length>0?(i(),w(V,{key:4,icon:"sym_o_badge",label:`Personnel Servi - Payé (${e.stats.detailed_lists.served_staff_paid.length})`,"header-style":{backgroundColor:_,color:o,fontWeight:"600"},class:"q-mb-md rounded-lg shadow-1","default-opened":"","expand-icon-class":`text-${o.replace("#","")}`},{default:l(()=>[s(T,{dense:"",flat:"",rows:e.stats.detailed_lists.served_staff_paid,columns:u.value,"row-key":"name",pagination:{rowsPerPage:10},"no-data-label":"Aucun personnel servi."},null,8,["rows","columns"])]),_:1},8,["label","header-style","expand-icon-class"])):v("",!0),e.stats.detailed_lists.served_staff_unpaid&&e.stats.detailed_lists.served_staff_unpaid.length>0?(i(),w(V,{key:5,icon:"sym_o_badge",label:`Personnel Servi - Non Payé (${e.stats.detailed_lists.served_staff_unpaid.length})`,"header-style":{backgroundColor:_,color:o,fontWeight:"600"},class:"q-mb-md rounded-lg shadow-1","default-opened":"","expand-icon-class":`text-${o.replace("#","")}`},{default:l(()=>[s(T,{dense:"",flat:"",rows:e.stats.detailed_lists.served_staff_unpaid,columns:u.value,"row-key":"name",pagination:{rowsPerPage:10},"no-data-label":"Aucun personnel servi."},null,8,["rows","columns"])]),_:1},8,["label","header-style","expand-icon-class"])):v("",!0)])):v("",!0)])):(i(),p("div",ze,[s($,{name:"sym_o_info",color:_.replace("#",""),size:"4em"},null,8,["color"]),a[2]||(a[2]=t("div",{class:"q-mt-md text-h6"},"Aucune donnée statistique",-1)),t("div",Qe,b(e.noDataMessage||`Veuillez sélectionner une période ou vérifier les
        programmes.`),1)]))]))}},rt=oe(it,[["__scopeId","data-v-7c6b6929"]]),dt={class:"grid grid-cols-1 lg:grid-cols-4 gap-3 lg:gap-5 items-end"},ct={class:"filter-button-container"},ut={class:"lg:col-span-2 date-picker-container"},mt={class:"grid md:grid-cols-2 gap-3"},vt={class:"date-input-wrapper"},ft={class:"row items-center justify-end q-mt-sm"},gt={class:"date-input-wrapper"},pt={class:"row items-center justify-end q-mt-sm"},_t={class:"filter-button-container"},yt={key:0,class:"mt-4 row items-center justify-between"},ht={class:"col-auto"},bt={key:0,class:"col-auto export-controls-container shadow-1 q-pa-xs rounded-borders"},xt={key:1,class:"mt-4 row items-center justify-between"},kt={key:0,class:"col-auto export-controls-container shadow-1 q-pa-xs rounded-borders"},wt={class:"stats-container"},St={__name:"CanteenDashboard",setup(e){const n=ge(),{setTitle:I,showFooter:c}=Pe(),F=G(()=>J(()=>import("./CanteenTicketHoldersReport-BMzB93DC.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),D=G(()=>J(()=>import("./CanteenDetailedStatsReport-CeLF3acC.js"),__vite__mapDeps([6,1,2,3,4,7]),import.meta.url)),u=z(null),f=z(null),S=z(null),P=z(null),y=m(()=>n.getters["canteenStats/isCanteenStatsLoading"]),r=m(()=>n.getters["canteenStats/getCanteenStatsError"]),a=m(()=>n.getters["canteenStats/getCanteenStatsData"]),k=m(()=>a.value?`Recette Tickets Cantine ${a.value.date?`du ${a.value.date}`:a.value.date_range?`du ${a.value.date_range.start} au ${a.value.date_range.end}`:"Période Actuelle"}`:"Recette Tickets Cantine"),g=m(()=>n.getters["ecole/info"]),h=m(()=>n.getters["ecole/invoiceSettings"]),W=m(()=>!!h.value),L=m(()=>a.value?{stats:a.value,schoolInfo:{name:g.value.description||"",addressLine1:g.value.adresse||"",city:g.value.ville||"",contactEmail:g.value.email||"",paymentEmail:h.value?.payment_email??(g.value.email||""),phone:g.value.telephone?"+"+g.value.telephone:"",logoUrl:h.value?.logo_path??(g.value.logo?Y(g.value.logo):"")},partnerInfo:{logoUrl:W.value&&h.value.partner_logo_path?Y(h.value.partner_logo_path):null}}:{}),M=m(()=>a.value&&a.value.detailed_lists&&!y.value&&!r.value&&(a.value.detailed_lists.ticket_students&&a.value.detailed_lists.ticket_students.length>0||a.value.detailed_lists.served_staff_paid&&a.value.detailed_lists.served_staff_paid.length>0||a.value.detailed_lists.served_staff_unpaid&&a.value.detailed_lists.served_staff_unpaid.length>0)),ne=m(()=>n.getters["user/current"]?.annee),ie=async()=>{if(ne.value)try{await n.dispatch("ecole/fetchInvoiceSettings")}catch{}},j=()=>{S.value="today",P.value="Aucune statistique de tickets trouvée pour aujourd'hui.",n.dispatch("canteenStats/fetchTodayStats")},re=()=>{if(!u.value||!f.value){X.create({type:"warning",message:"Veuillez sélectionner une date de début et de fin."});return}if(te.getDateDiff(f.value,u.value,"days")<0){X.create({type:"negative",message:"La date de fin ne peut pas être antérieure à la date de début."});return}S.value="range",P.value="Aucune statistique de tickets trouvée pour la période sélectionnée.",n.dispatch("canteenStats/fetchRangeStats",{startDate:u.value,endDate:f.value})},de=()=>{u.value=null,f.value=null,S.value=null,P.value="Veuillez sélectionner une période.",n.dispatch("canteenStats/clearCanteenStats")},ce=N=>!u.value||te.getDateDiff(N,u.value,"days")>=0;return pe(()=>{I("Tableau de bord de la cantine"),c(!1),j(),ie()}),_e(()=>{n.dispatch("canteenStats/clearCanteenStats")}),(N,d)=>(i(),w(ye,{padding:"",class:"page-content dashboard-container"},{default:l(()=>[s(q,{flat:"",bordered:"",class:"filter-card q-mb-lg"},{default:l(()=>[s(A,{class:"bg-blue-1"},{default:l(()=>[d[8]||(d[8]=t("div",{class:"text-subtitle1 q-mb-md text-weight-bold text-indigo-9"},"Afficher les statistiques pour :",-1)),t("div",dt,[t("div",ct,[s(E,{label:"Aujourd'hui",color:"indigo-8",onClick:j,icon:"sym_o_today",loading:y.value&&S.value==="today",disable:y.value,class:"full-width btn-elevated",unelevated:"",rounded:""},null,8,["loading","disable"])]),t("div",ut,[d[4]||(d[4]=t("div",{class:"text-caption q-mb-xs text-indigo-8 text-weight-medium"},"Période spécifique :",-1)),t("div",mt,[t("div",vt,[s(U,{dense:"",filled:"",modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=C=>u.value=C),label:"Date de début",mask:"####-##-##",clearable:"",class:"date-input",standout:"","bg-color":"blue-1"},{prepend:l(()=>[s($,{name:"sym_o_event",class:"cursor-pointer text-indigo-7"},{default:l(()=>[s(Z,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[s(K,{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=C=>u.value=C),mask:"YYYY-MM-DD",minimal:"",color:"indigo-8"},{default:l(()=>[t("div",ft,[H(s(E,{label:"Fermer",color:"indigo-8",flat:""},null,512),[[ee]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",gt,[s(U,{dense:"",filled:"",modelValue:f.value,"onUpdate:modelValue":d[3]||(d[3]=C=>f.value=C),label:"Date de fin",mask:"####-##-##",clearable:"",class:"date-input",standout:"","bg-color":"blue-1"},{prepend:l(()=>[s($,{name:"sym_o_event",class:"cursor-pointer text-indigo-7"},{default:l(()=>[s(Z,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[s(K,{modelValue:f.value,"onUpdate:modelValue":d[2]||(d[2]=C=>f.value=C),mask:"YYYY-MM-DD",minimal:"",options:ce,color:"indigo-8"},{default:l(()=>[t("div",pt,[H(s(E,{label:"Fermer",color:"indigo-8",flat:""},null,512),[[ee]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),t("div",_t,[s(E,{label:"Afficher période",color:"teal-8",onClick:re,icon:"sym_o_date_range",disable:!u.value||!f.value||y.value,loading:y.value&&S.value==="range",class:"full-width btn-elevated",unelevated:"",rounded:""},null,8,["disable","loading"])])]),a.value?(i(),p("div",yt,[t("div",ht,[s(E,{label:"Effacer Filtres",color:"grey-7",flat:"",onClick:de,icon:"clear",disable:y.value,class:"q-pl-sm q-pr-md",rounded:""},null,8,["disable"])]),M.value?(i(),p("div",bt,[d[5]||(d[5]=t("div",null," Liste Cantine",-1)),s(se,{"report-component":Q(D),"report-data":L.value,"report-component-styles":[{url:"/reports/cantine.css?v=1.0.0"}],"pdf-filename-prefix":"Recette_Tickets_Cantine","pdf-title":k.value},null,8,["report-component","report-data","pdf-title"])])):v("",!0)])):v("",!0),a.value?(i(),p("div",xt,[d[7]||(d[7]=t("div",{class:"col-auto"},null,-1)),M.value?(i(),p("div",kt,[d[6]||(d[6]=t("div",null," Recettes Tickets",-1)),s(se,{"report-component":Q(F),"report-data":L.value,"report-component-styles":[{url:"/reports/cantine.css?v=1.0.0"}],"pdf-filename-prefix":"Recette_Tickets_Cantine","pdf-title":k.value},null,8,["report-component","report-data","pdf-title"])])):v("",!0)])):v("",!0)]),_:1})]),_:1}),t("div",wt,[s(rt,{stats:a.value,loading:y.value,error:r.value,"no-data-message":P.value,class:"stats-display"},null,8,["stats","loading","error","no-data-message"])])]),_:1}))}},ts=oe(St,[["__scopeId","data-v-245849c6"]]);export{ts as default};
