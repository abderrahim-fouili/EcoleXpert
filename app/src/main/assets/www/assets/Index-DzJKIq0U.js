import{Q as q}from"./QBadge-Bjfo5tRO.js";import{_ as L,ar as ee,b4 as te,as as O,at as A,aB as M,aY as P,b5 as se,aW as re,J as le,Q as f,S as a,a6 as r,a5 as t,af as B,av as C,a3 as m,ad as u,ab as h,b6 as ve,aF as ie,a8 as p,a2 as x,ay as D,d4 as ge,R as g,b7 as _e,aG as oe,aE as z,b8 as ae,b9 as ne,b2 as de,ba as ue,dv as be,a4 as c,ax as V,a9 as b,aa as F,ah as I,a7 as H,aV as W,aK as X,ag as U,ac as ye,aD as E,aC as we}from"./index-Bl2lQPd7.js";import{Q as v}from"./QItemLabel-BkJiB6aE.js";import{Q as $,a as y}from"./QItem-De3v03wU.js";import{Q as Y}from"./QList-CMzNTEGD.js";import{q as ke}from"./format-IcNrutKL.js";import{Q as K}from"./QToolbarTitle-C8APieXG.js";import{Q as J}from"./QToolbar-DR-_wX4W.js";import{Q as Ve}from"./QSelect-DchnWyXK.js";import{Q as fe}from"./QDate-C_jC-zMt.js";import{Q as me}from"./QPopupProxy-CQ30ymZI.js";import{Q as j}from"./QTooltip-r7WoEuzy.js";import{Q as Ce}from"./QUploaderAddTrigger-OZIUWg9a.js";import{Q as De}from"./QUploader-Dwk8_y__.js";import{Q as he}from"./QForm-Dk45GsL9.js";import{C as R}from"./ClosePopup-BY_YGFBZ.js";import{g as pe}from"./index-CCBxiyaS.js";import{f as N}from"./index-C9ZTL5MN.js";import{Q as Fe}from"./QExpansionItem-EMhshZ_3.js";import{f as Z}from"./index-Dx01H97j.js";import"./QChip-C9OfA2gn.js";import"./QMenu-BNr9Tzvf.js";import"./position-engine-o8Q2RudZ.js";import"./selection-DaBtDCZ0.js";import"./rtl-DFPa-2ov.js";import"./use-render-cache-DLxPkVnQ.js";import"./use-datetime-hbLWgGn4.js";import"./date-C1Mon-Jj.js";import"./QCircularProgress-C_b7NmsY.js";import"./index-BXMW6yyY.js";import"./index-CbPSoDvq.js";import"./QSlideTransition-CrdUnXBf.js";const Qe={data(){return{cfiles:0}},props:{title:{default:()=>"Nouveau devoir"}},computed:{...A({user:"user/user",config:"user/config",current:"user/current",form:"devoirs/form"}),uploadFields(){return[{name:"notReponse",value:!0}]},classe(){if(this.current&&this.current.hasOwnProperty("classe"))return this.current.classe},options(){return this.classes},classes(){return this.current&&this.current.hasOwnProperty("classes")?this.current.classes:[]},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee},headers(){return[{name:"Authorization",value:le.defaults.headers.common.Authorization}]},url(){return re("api")+"/devoirs/pj"}},methods:{...O({create:"devoirs/create",update:"devoirs/update"}),isDate:te,openURL:ee,minDate(e){return e>=N(new Date,"yyyy/MM/dd")},isImage(e){return se(this.fileUrl(e))},fileUrl(e){return P(e)},personAvatar(e){return M(e)},added(e){this.cfiles=e.length},removed(e){this.cfiles-=e.length},attach(){this.$nextTick(()=>{this.$refs.uploader.pickFiles()})},send(){this.$refs.form.validate().then(e=>{if(!e)return this.$q.notify({color:"negative",message:this.$t("stats.fields"),position:"bottom",icon:"error_outline",actions:[{label:this.$q.lang.label.close,color:"yellow"}]}),!1;this.cfiles>0?this.$refs.uploader.upload():this.sendMessage()})},sendMessage(e){let s=[],o=Object.assign({},this.form);o.fichiers=[],e&&(s=JSON.parse(e.xhr.response).result),o.idannee=this.annee.idannee,o.rendre_le=pe(new Date(o.rendre_le))/1e3,o.personne_id=this.user.idpers;let k={files:s,...o};this.form.id?this.update(k).then(n=>{this.$emit("devoir:sent",{d:n,isNew:!1})}).catch(n=>{this.$q.notify({color:"negative",message:this.$t("stats.fields"),position:"bottom",icon:"error_outline",actions:[{label:this.$q.lang.label.close,color:"yellow"}]}),this.$emit("devoir:error",n)}):this.create(k).then(n=>{this.$emit("devoir:sent",{d:n,isNew:!0})}).catch(n=>{this.$q.notify({color:"negative",message:this.$t("stats.fields"),position:"bottom",icon:"error_outline",actions:[{label:this.$q.lang.label.close,color:"yellow"}]}),this.$emit("devoir:error",n)})},choice(e){this.step=e.value.step,this.$nextTick(()=>{if(this.form.destinataire=this.destinataire.map(o=>o.value.idpers?{type:"personne",id:o.value.idpers,value:"personne_"+o.value.idpers,label:o.label}:o),this.step!=="personnes"&&e.value.value)this.destinataire=null,this.setOptions(),this.$refs.dest.refresh(),this.steps.push(e.value);else if(e.value.value===0)for(var s=0;s<this.steps.length;s++)this.steps[s].step===e.value.step&&delete this.steps[s]})},clear(){this.destinataire=null,this.step=null,this.steps=[],this.setOptions()},hasDiscs(e){return e.value.disciplines&&e.value.disciplines.length},discs(e){return e.value.disciplines[0].description}},activated(){this.cfiles=this.form.fichiers.length}},Ue={class:"row items-center justify-end"},qe={class:"row"},xe={class:"col-xs-12"},Re={class:"row no-wrap items-center q-pa-sm q-gutter-xs",style:{}},je={class:"col"},Ne={class:"q-uploader__subtitle"};function Le(e,s,o,k,n,i){return a(),f(z,null,{default:r(()=>[t(J,{class:B({"bg-secondary":!e.form.status,"bg-positive":e.form.status,"text-white":!0,"shadow-2":!0})},{default:r(()=>[C(t(m,{flat:"",dense:"",icon:"arrow_back"},null,512),[[R]]),t(K,null,{default:r(()=>[u(h(o.title),1)]),_:1}),t(m,{flat:"",dense:"",icon:"attach_file",onClick:i.attach,disable:!!e.form.status},{default:r(()=>[C(t(q,{floating:"",color:"yellow-9"},{default:r(()=>[u(h(n.cfiles),1)]),_:1},512),[[ve,n.cfiles>0]])]),_:1},8,["onClick","disable"]),t(m,{class:"q-ml-lg",flat:"",icon:"send",onClick:i.send,disable:!!e.form.status},null,8,["onClick","disable"])]),_:1},8,["class"]),t(ie,{style:{"overflow-y":"scroll"}},{default:r(()=>[t(he,{class:"q-gutter-lg",ref:"form"},{default:r(()=>[t(Ve,{filled:"",modelValue:e.form.classes,"onUpdate:modelValue":s[0]||(s[0]=l=>e.form.classes=l),multiple:"",options:i.options,rules:[l=>l.length>0||"Champ requis"],label:"Classes","emit-value":"","option-value":"idclasse","option-label":"classe_fr","map-options":""},null,8,["modelValue","options","rules"]),t(x,{onClick:s[3]||(s[3]=l=>e.$refs.rendre_le.show()),label:"A rendre le",filled:"",modelValue:e.form.rendre_le,"onUpdate:modelValue":s[4]||(s[4]=l=>e.form.rendre_le=l),mask:"####-##-##",rules:[i.isDate]},{append:r(()=>[t(D,{name:"event",class:"cursor-pointer"},{default:r(()=>[t(me,{ref:"rendre_le",cover:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[t(fe,{options:i.minDate,minimal:"",modelValue:e.form.rendre_le,"onUpdate:modelValue":[s[1]||(s[1]=l=>e.form.rendre_le=l),s[2]||(s[2]=l=>e.$refs.rendre_le.hide())],mask:"YYYY-MM-DD"},{default:r(()=>[p("div",Ue,[C(t(m,{label:"Fermer",color:"primary",flat:""},null,512),[[R]])])]),_:1},8,["options","modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue","rules"]),t(ge,{style:{"margin-top":"5px"},dense:"",modelValue:e.form.obligatoire,"onUpdate:modelValue":s[5]||(s[5]=l=>e.form.obligatoire=l),"true-value":1,"false-value":0,label:"Obligatoire"},null,8,["modelValue"]),t(x,{filled:"",modelValue:e.form.objet,"onUpdate:modelValue":s[6]||(s[6]=l=>e.form.objet=l),label:"Objet",rules:[l=>!!l||"Champ requis"],"lazy-rules":""},null,8,["modelValue","rules"]),t(x,{filled:"",modelValue:e.form.descriptif,"onUpdate:modelValue":s[7]||(s[7]=l=>e.form.descriptif=l),autogrow:"",type:"textarea",label:"Descriptif","lazy-rules":"","input-style":"min-height:150px"},null,8,["modelValue"]),p("div",qe,[p("div",xe,[t(De,{"field-name":l=>"pieces_jointe[]",style:{width:"100%"},url:i.url,flat:"",multiple:"",headers:i.headers,"form-fields":i.uploadFields,ref:"uploader",batch:"",onAdded:i.added,onRemoved:i.removed,onUploaded:i.sendMessage},{header:r(l=>[p("div",Re,[l.queuedFiles.length>0?(a(),f(m,{key:0,icon:"clear_all",onClick:l.removeQueuedFiles,round:"",dense:"",flat:""},{default:r(()=>[t(j,null,{default:r(()=>s[8]||(s[8]=[u("Supprimer tous")])),_:1})]),_:2},1032,["onClick"])):g("",!0),l.uploadedFiles.length>0?(a(),f(m,{key:1,icon:"done_all",onClick:l.removeUploadedFiles,round:"",dense:"",flat:""},{default:r(()=>[t(j,null,{default:r(()=>s[9]||(s[9]=[u("Supprimer")])),_:1})]),_:2},1032,["onClick"])):g("",!0),l.isUploading?(a(),f(_e,{key:2,class:"q-uploader__spinner"})):g("",!0),p("div",je,[s[10]||(s[10]=p("div",{class:"q-uploader__title"},"Pieces Jointe",-1)),p("div",Ne,h(l.uploadSizeLabel)+" / "+h(l.uploadProgressLabel),1)]),l.canAddFiles?(a(),f(m,{key:3,type:"a",icon:"add_box",round:"",dense:"",flat:""},{default:r(()=>[t(Ce),t(j,null,{default:r(()=>s[11]||(s[11]=[u("Ajouter des fichiers")])),_:1})]),_:1})):g("",!0),l.isUploading?(a(),f(m,{key:4,icon:"clear",onClick:l.abort,round:"",dense:"",flat:""},{default:r(()=>[t(j,null,{default:r(()=>s[12]||(s[12]=[u("Annuler")])),_:1})]),_:2},1032,["onClick"])):g("",!0)])]),_:1},8,["url","headers","form-fields","onAdded","onRemoved","onUploaded"])])])]),_:1},512)]),_:1}),t(oe,{align:"right",class:""},{default:r(()=>[t(m,{label:"Envoyer",icon:"send",onClick:i.send,disable:!!e.form.status},null,8,["onClick","disable"])]),_:1})]),_:1})}const Oe=L(Qe,[["render",Le]]),Ae={props:["devoir"],data(){return{nonfait:[]}},computed:{...A({reponses:"devoirs/reponses",user:"user/user",config:"user/config",current:"user/current",nonFait:"devoirs/nonFait"}),classe(){if(this.current&&this.current.hasOwnProperty("classe"))return this.current.classe},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee}},methods:{...be({setReponse:"devoirs/setDevoirsReponses"}),...O({getReponses:"devoirs/getReponsesProf",saveNonFait:"devoirs/saveNonFait",getNonFait:"devoirs/nonFait"}),userPhotoUrl:M,LetterAvatar:ue,toNow:de,fileIcon:ne,openURL:ae,pjUrl:P,saveNonfait(){this.saveNonFait({annee:this.annee.idannee,classe:this.classe.idclasse,devoir:this.devoir.id,nonfait:this.nonfait}).then(e=>{this.loadNonFait()})},loadNonFait(){this.getNonFait({annee:this.annee.idannee,classe:this.classe.idclasse,devoir:this.devoir.id}).then(e=>{this.nonfait=e.map(s=>s.eleve_id)})}},mounted(){this.setReponse([]),this.getReponses({annee:this.annee.idannee,classe:this.classe.idclasse,devoir:this.devoir.id}).then(()=>{this.loadNonFait()})}},Me=["src"],Pe=["onClick"],ze=["src"];function Se(e,s,o,k,n,i){return a(),f(z,null,{default:r(()=>[t(J,{class:B({"bg-secondary":!0,"text-white":!0,"shadow-2":!0})},{default:r(()=>[C(t(m,{flat:"",dense:"",icon:"arrow_back"},null,512),[[R]]),t(K,null,{default:r(()=>[u(h(o.devoir.objet),1)]),_:1})]),_:1}),t(Y,null,{default:r(()=>[t(V),(a(!0),c(b,null,F(e.reponses,(l,S)=>(a(),c(b,{key:S},[l.reponses&&l.reponses.length?(a(),f(Fe,{key:0,"hide-expand-icon":"","default-opened":""},{header:r(()=>[t(y,{avatar:""},{default:r(()=>[t(H,{square:"",size:"lg"},{default:r(()=>[p("img",{src:i.userPhotoUrl(l.eleve)},null,8,Me)]),_:2},1024)]),_:2},1024),t(y,null,{default:r(()=>[u(h(l.eleve.nom)+" "+h(l.eleve.prenom),1)]),_:2},1024),t(y,{side:""},{default:r(()=>[t(W,{label:"non fait",color:"red",modelValue:n.nonfait,"onUpdate:modelValue":[s[0]||(s[0]=_=>n.nonfait=_),i.saveNonfait],val:l.eleve.idpers},null,8,["modelValue","val","onUpdate:modelValue"])]),_:2},1024)]),default:r(()=>[t(Y,null,{default:r(()=>[t(V),(a(!0),c(b,null,F(l.reponses,(_,T)=>(a(),c(b,{key:T},[t($,null,{default:r(()=>[t(y,null,{default:r(()=>[t(v,null,{default:r(()=>[u(h(_.message),1)]),_:2},1024),_.fichiers&&_.fichiers.length?(a(),f(v,{key:0,lines:"1"},{default:r(()=>[(a(!0),c(b,null,F(_.fichiers,(Q,d)=>(a(),c("div",{outline:"",color:"grey-9",onClick:I(G=>i.openURL(i.pjUrl(Q)),["stop"]),class:"ellipsis rounded-borders q-mr-xs q-pa-xs",style:{"max-width":"40%",display:"inline-block",border:"1px solid var(--q-primary)"}},[t(D,{name:"img:"+i.fileIcon(Q.fichier),size:"14px"},null,8,["name"]),u(" "+h(Q.fichier),1)],8,Pe))),256))]),_:2},1024)):g("",!0)]),_:2},1024)]),_:2},1024),t(V)],64))),128))]),_:2},1024)]),_:2},1024)):(a(),f($,{key:1},{default:r(()=>[t(y,{avatar:""},{default:r(()=>[t(H,{square:"",size:"lg"},{default:r(()=>[p("img",{src:i.userPhotoUrl(l.eleve)},null,8,ze)]),_:2},1024)]),_:2},1024),t(y,null,{default:r(()=>[u(h(l.eleve.nom)+" "+h(l.eleve.prenom),1)]),_:2},1024),t(y,{side:""},{default:r(()=>[t(W,{label:"non fait",color:"red",modelValue:n.nonfait,"onUpdate:modelValue":[s[1]||(s[1]=_=>n.nonfait=_),i.saveNonfait],val:l.eleve.idpers},null,8,["modelValue","val","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),t(V)],64))),128))]),_:1})]),_:1})}const Te=L(Ae,[["render",Se]]),Ee={data(){return{}},props:{title:{default:()=>"Filtre"},form:{default:()=>({rendre:null,objet:null,obligatoire:null})}},computed:{...A({user:"user/user",config:"user/config",current:"user/current"}),uploadFields(){return[{name:"notReponse",value:!0}]},classe(){if(this.current&&this.current.hasOwnProperty("classe"))return this.current.classe},options(){return this.classes},classes(){return this.current&&this.current.hasOwnProperty("classes")?this.current.classes:[]},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee},headers(){return[{name:"Authorization",value:le.defaults.headers.common.Authorization}]},url(){return re("api")+"/devoirs/pj"}},methods:{...O({create:"devoirs/create",update:"devoirs/update"}),isDate:te,openURL:ee,minDate(e){return e>=N(new Date,"yyyy/MM/dd")},isImage(e){return se(this.fileUrl(e))},fileUrl(e){return P(e)},personAvatar(e){return M(e)},send(){this.$refs.form.validate().then(e=>{if(!e)return this.$q.notify({color:"negative",message:this.$t("stats.fields"),position:"bottom",icon:"error_outline",actions:[{label:this.$q.lang.label.close,color:"yellow"}]}),!1;this.sendMessage()})},sendMessage(){this.$emit("devoir:filter",{filter:this.form})},choice(e){this.step=e.value.step,this.$nextTick(()=>{if(this.form.destinataire=this.destinataire.map(o=>o.value.idpers?{type:"personne",id:o.value.idpers,value:"personne_"+o.value.idpers,label:o.label}:o),this.step!=="personnes"&&e.value.value)this.destinataire=null,this.setOptions(),this.$refs.dest.refresh(),this.steps.push(e.value);else if(e.value.value===0)for(var s=0;s<this.steps.length;s++)this.steps[s].step===e.value.step&&delete this.steps[s]})},clear(){this.destinataire=null,this.step=null,this.steps=[],this.setOptions()},hasDiscs(e){return e.value.disciplines&&e.value.disciplines.length},discs(e){return e.value.disciplines[0].description}},activated(){this.cfiles=this.form.fichiers.length}},Ie={class:"row items-center justify-end"};function $e(e,s,o,k,n,i){return a(),f(z,null,{default:r(()=>[t(J,{class:B({"bg-secondary":!o.form.status,"bg-positive":o.form.status,"text-white":!0,"shadow-2":!0})},{default:r(()=>[C(t(m,{flat:"",dense:"",icon:"arrow_back"},null,512),[[R]]),t(K,null,{default:r(()=>s[5]||(s[5]=[u(" Filtre ")])),_:1}),t(m,{class:"q-ml-lg",flat:"",icon:"filter_list",onClick:i.send},null,8,["onClick"])]),_:1},8,["class"]),t(ie,{style:{"overflow-y":"scroll"}},{default:r(()=>[t(he,{class:"q-gutter-lg",ref:"form"},{default:r(()=>[t(x,{onKeydown:X(i.send,["enter"]),clearable:"",onClick:s[2]||(s[2]=l=>e.$refs.rendre_le.show()),label:"A rendre le",filled:"",modelValue:o.form.rendre,"onUpdate:modelValue":s[3]||(s[3]=l=>o.form.rendre=l),mask:"####-##-##"},{append:r(()=>[t(D,{name:"event",class:"cursor-pointer"},{default:r(()=>[t(me,{ref:"rendre_le",cover:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[t(fe,{minimal:"",modelValue:o.form.rendre,"onUpdate:modelValue":[s[0]||(s[0]=l=>o.form.rendre=l),s[1]||(s[1]=l=>e.$refs.rendre_le.hide())],mask:"YYYY-MM-DD"},{default:r(()=>[p("div",Ie,[C(t(m,{label:"Fermer",color:"primary",flat:""},null,512),[[R]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["onKeydown","modelValue"]),t(x,{filled:"",modelValue:o.form.objet,"onUpdate:modelValue":s[4]||(s[4]=l=>o.form.objet=l),clearable:"",label:"Objet","lazy-rules":"",onKeydown:X(i.send,["enter"])},null,8,["modelValue","onKeydown"])]),_:1},512)]),_:1}),t(oe,{align:"right"},{default:r(()=>[t(m,{icon:"filter_list",onClick:i.send},{default:r(()=>s[6]||(s[6]=[u("Appliquer")])),_:1},8,["onClick"])]),_:1})]),_:1})}const Ye=L(Ee,[["render",$e]]),Be={emits:["devoir:edit","devoir:remove","devoir:hold"],components:{EditForm:Oe,ReponseEleve:Te,FilterForm:Ye},data(){return{active:null,show:!1,showReponse:!1,showFilter:!1,title:"Devoir",devoir:null,filterForm:{rendre:null,objet:null,obligatoire:null}}},computed:{...A({user:"user/user",config:"user/config",current:"user/current",form:"devoirs/form",devoirsList:"devoirs/devoirs"}),devoirs(){return this.devoirsList&&this.devoirsList.data?this.devoirsList.data:[]},classe(){if(this.current&&this.current.hasOwnProperty("classe"))return this.current.classe},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee}},methods:{...O({getConfig:"user/getConfig",getDevoirs:"devoirs/getDevoirs",remove:"devoirs/remove",setRefresh:"setRefresh"}),LetterAvatar:ue,toNow:de,fileIcon:ne,openURL:ae,pjUrl:P,hasFilter(){return this.filterForm.objet&&this.filterForm.objet!=""||this.filterForm.rendre&&this.filterForm.rendre!=""},showDialog(){this.show=!0,this.title="Nouveau devoir",this.form.reset(),this.form.classes.push(this.classe.idclasse)},filterDialog(){console.log("filter"),this.showFilter=!0},devoirEnvoye({isNew:e}){e?this.getDevoirs({page:1,filter:this.filter()}):this.getData(),this.show=!1,this.$q.notify({color:"positive",message:this.$t("stats.success"),position:"bottom",icon:"check",actions:[{label:this.$q.lang.label.close,color:"white"}]})},getData(){this.showFilter=!1,this.getDevoirs({page:this.devoirsList.current_page,filter:this.filter()})},filter(){let e={annee:this.annee.idannee,classe:[this.classe.idclasse]};return this.filterForm&&(e={...e,...this.filterForm},e.rendre&&(e.rendre=pe(new Date(e.rendre))/1e3)),e},showDelete(e){this.$q.dialog({title:"Suppression",message:"Supprimer ce devoir?",cancel:!0,ok:{label:"Oui",outline:!0,color:"red"},persistent:!0}).onOk(()=>{this.remove(e).then(s=>{this.getData()})})},reponse(e){this.devoir=e,this.showReponse=!0},edit(e){e.id===this.active?this.active=null:e&&!e.status&&(Object.assign(this.form,e),this.form.rendre_le=N(Z(this.form.rendre_le),"yyyy-MM-dd"),this.$emit("devoir:edit",{dvr:e,title:"Modifier"}),this.title=this.form.objet,this.form.classes=this.form.classes.map(s=>s.classe_id),this.show=!0)},toDate(e){return ke.capitalize(N(Z(e),"E dd MMM yyyy"))},personAvatar(e){return M(e)},sub(e){return this.$cleanHtml(e,{allowedTags:["b","i","em","strong","a"]})}},watch:{classe(){this.getDevoirs({page:1,filter:this.filter()})}},mounted(){this.setTitle("Devoirs"),this.devoirs.length||this.getDevoirs({page:1,filter:this.filter()}),this.setRefresh(e=>{this.getDevoirs({page:1,filter:this.filter()}),e()})}},Ke={class:"q-pa-lg flex flex-center"},Je={style:{"font-weight":"500"}},Ge=["onClick"];function He(e,s,o,k,n,i){const l=U("ep-pagination"),S=U("edit-form"),_=U("reponse-eleve"),T=U("filter-form"),Q=U("ep-footer");return a(),c(b,null,[t(we,{padding:"",class:"page-content"},{default:r(()=>[p("div",Ke,[e.devoirsList?(a(),f(l,{key:0,modelValue:e.devoirsList.current_page,"onUpdate:modelValue":[s[0]||(s[0]=d=>e.devoirsList.current_page=d),i.getData],max:e.devoirsList.last_page,"direction-links":"","boundary-links":!1,div:"",divClass:"full-width text-center text-white text-bold",dark:"",color:"white",class:"bg-primary full-width",style:{"border-radius":"10rem",height:"30px"}},{content:r(()=>[t(m,{onClick:i.filterDialog,flat:""},{default:r(()=>[i.hasFilter()?(a(),f(q,{key:0,color:"warning",rounded:"",align:"top"})):g("",!0),t(D,{name:"filter_list"}),u(" Page "+h(e.devoirsList.current_page),1)]),_:1},8,["onClick"])]),_:1},8,["modelValue","max","onUpdate:modelValue"])):g("",!0)]),t(z,{style:{margin:"0 -8px"},flat:""},{default:r(()=>[t(Y,null,{default:r(()=>[t(V),(a(!0),c(b,null,F(i.devoirs,(d,G)=>(a(),c(b,{key:G},[t($,{clickable:"",style:ye({"border-left":"5px solid "+(d.status?"var(--q-positive)":"var(--q-warning)")}),onClick:w=>i.edit(d),active:n.active===d.id},{default:r(()=>[t(y,null,{default:r(()=>[t(v,{style:{"font-weight":"500"}},{default:r(()=>[p("div",null,h(d.objet),1)]),_:2},1024),t(v,{style:{padding:"12px 0"},lines:"1"},{default:r(()=>[u(h(d.descriptif),1)]),_:2},1024),t(v,{lines:"1"},{default:r(()=>[s[4]||(s[4]=u(" A RENDRE LE: ")),p("span",Je,h(i.toDate(d.rendre_le)),1)]),_:2},1024),t(v,null,{default:r(()=>[(a(!0),c(b,null,F(d.classes,(w,ce)=>(a(),f(q,{key:"n.id+'-cls-'+icls",color:"blue"},{default:r(()=>[u(h(w.classes.classe_fr),1)]),_:2},1024))),128))]),_:2},1024),d.fichiers.length?(a(),f(v,{key:0,lines:"1"},{default:r(()=>[(a(!0),c(b,null,F(d.fichiers,(w,ce)=>(a(),c("div",{outline:"",color:"grey-9",onClick:I(We=>i.openURL(i.pjUrl(w)),["stop"]),class:"ellipsis rounded-borders q-mr-xs q-pa-xs",style:{"max-width":"40%",display:"inline-block",border:"1px solid var(--q-primary)"}},[t(D,{name:"img:"+i.fileIcon(w.fichier),size:"14px"},null,8,["name"]),u(" "+h(w.fichier),1)],8,Ge))),256))]),_:2},1024)):g("",!0)]),_:2},1024),t(y,{side:"",top:"",style:{position:"relative"}},{default:r(()=>[t(v,{caption:""},{default:r(()=>[u(h(i.toNow(d.created_at*1e3)),1)]),_:2},1024),t(v,{caption:""},{default:r(()=>[d.status?(a(),f(q,{key:0,color:"positive"},{default:r(()=>s[5]||(s[5]=[u("Validé")])),_:1})):(a(),f(q,{key:1,color:"warning"},{default:r(()=>s[6]||(s[6]=[u("En cours")])),_:1}))]),_:2},1024),d.status?(a(),f(v,{key:0},{default:r(()=>[t(m,{size:"lg",icon:"assignment_return",color:"teal",flat:"",dense:"",onClick:w=>i.reponse(d)},null,8,["onClick"])]),_:2},1024)):g("",!0),d.status?g("",!0):(a(),f(v,{key:1,style:{"min-height":"32px","min-width":"32px","margin-top":"16px"}},{default:r(()=>[t(m,{onClick:I(w=>i.showDelete(d),["stop"]),dense:"",flat:"",color:"red",class:"absolute-bottom-right"},{default:r(()=>[t(D,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1024))]),_:2},1024)]),_:2},1032,["style","onClick","active"]),t(V)],64))),128))]),_:1})]),_:1}),t(E,{modelValue:n.show,"onUpdate:modelValue":s[1]||(s[1]=d=>n.show=d),maximized:"",position:"bottom"},{default:r(()=>[t(S,{"onDevoir:sent":i.devoirEnvoye,title:n.title},null,8,["onDevoir:sent","title"])]),_:1},8,["modelValue"]),t(E,{modelValue:n.showReponse,"onUpdate:modelValue":s[2]||(s[2]=d=>n.showReponse=d),maximized:"",position:"right"},{default:r(()=>[t(_,{devoir:n.devoir},null,8,["devoir"])]),_:1},8,["modelValue"]),t(E,{modelValue:n.showFilter,"onUpdate:modelValue":s[3]||(s[3]=d=>n.showFilter=d),position:"top"},{default:r(()=>[t(T,{form:n.filterForm,"onDevoir:filter":i.getData},null,8,["form","onDevoir:filter"])]),_:1},8,["modelValue"])]),_:1}),t(Q,{to:"#footer-portal"},{default:r(()=>[t(m,{flat:"",onClick:i.showDialog,icon:"icon_exercice_numerique",label:"Nouveau devoir"},null,8,["onClick"])]),_:1})],64)}const xt=L(Be,[["render",He]]);export{xt as default};
