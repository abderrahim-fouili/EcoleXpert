import{y as _,_ as j,as as I,at as S,ag as P,a4 as u,S as d,a5 as n,Q as f,R as k,a6 as o,a8 as t,ad as F,ab as g,aE as D,a9 as h,aa as N,ac as E,aC as U,a3 as v,aF as w,av as A,aG as B,aD as O,ax as H}from"./index-Bl2lQPd7.js";import{Q as M}from"./QSpace-CKKoNTi_.js";import{C as x}from"./ClosePopup-BY_YGFBZ.js";import{f as q,p as C}from"./index-ktPCo2xP.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./_curry1-CPMemvwC.js";import"./_isArrayLike-B3kKjEvQ.js";const L={props:["data","sem","cachenombre","courbe","tag"],data(){return{colors:{1:"#008000",2:"#FF880F",3:"#F80A0A",4:"#45B851",5:"#ADDE1F",6:"#FFDA01"}}},methods:{notes(i){let e=[];const l=a=>(a.forEach(s=>{s.data.isLeaf?s.ev&&e.push(s.ev):e.concat(l(s.children))}),e);return l(i)},sortObj(i){return Object.keys(i).sort().reduce(function(e,l){return e[l]=i[l],e},{})},sum(i){return Object.keys(i).reduce((e,l)=>e+parseFloat(i[l]||0),0)}},render(){let i=this.notes(this.data),e=[],l={};if(i.forEach(a=>{l[a[0].value.status]?l[a[0].value.status]+=1:l[a[0].value.status]=1}),this.courbe){let a=this.sum(l);if(a>0){for(const s in l)if(Object.hasOwnProperty.call(l,s)){const c=l[s];e.push(_("div",{class:"InlineBlock",style:{border:"1px solid #343434","background-color":this.colors[s],width:100*c/a+"%",height:"2rem"}}))}}}else for(const a in l)if(Object.hasOwnProperty.call(l,a)){const s=l[a];e.push(_("div",{class:"InlineBlock",style:"padding: 0rem 0.2rem;"},[s>1||!this.cachenombre?_("div",{class:"InlineBlock ep-nbr"},s):null,_("span",{class:"NiveauAcquisition NiveauAcquisition_Pastille",style:"background-color:"+this.colors[a]})]))}return _(this.tag??"div",{},e)}},T={data(){return{sem:1,alert:!1,detailsAlert:!1,legende:!1,discs:[],item:[],details:[]}},components:{Evaluation:L},computed:{...S({user:"user/user",config:"user/config",current:"user/current",data:"suivi/data"}),eleve(){if(this.current&&this.current.hasOwnProperty("eleve"))return this.current.eleve},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee}},methods:{...I({getConfig:"user/getConfig",getNotes:"suivi/getData",reset:"suivi/reset"}),open(i){this.item=i,this.alert=!0},openDetails(i){this.details=i,this.detailsAlert=!0},getData(){this.getNotes({annee:this.annee.idannee,eleve:this.eleve.idpers,niveau:this.annee.pivot.classes.idniveau,sem:this.sem})},color(i){return q(C(q(C(i,"data.node.matieres")),"discipline"))[0].color},discipline(i){return q(C(q(C(i,"data.node.matieres")),"discipline"))[0].description},un(i,e){var l=i[e],a=l[Object.keys(l)[0]],a=a[0].unite.trim(),a=a.replace("معدل وحدة ",""),a=a.replace("Moyenne de ",""),a=a.replace("Moyenne d'","");return a.toUpperCase()},mn(i,e){var l=i[e],a=l[0].matiere.trim(),a=a.replace("معدل وحدة ",""),a=a.replace("Moyenne de ",""),a=a.replace("Moyenne d'","");return a.toUpperCase()},ca(i,e){var l=i[e];return l},cn(i,e,l){i[e]},total(i,e,l){if(i==="m"){var a=e[l],s=a.reduce(function(m,V){return m+Number(V.note)},0);return(s/a.length).toFixed(2)}else if(i==="u"){for(var c=Object.keys(e[l]),s=0,p=c.length-1;p>=0;p--)Object.keys(e[l][c[p]]),s+=Number(this.total("m",e[l],c[p]));return(s/c.length).toFixed(2)}},keys(i){return Object.keys(i?this.notes[this.sem][i]:this.notes[this.sem])}},mounted(){this.setTitle("Suivi de l'élève"),this.reset(),this.getData()}},G={class:"q-pa-lg flex flex-center"},z={class:"collection"},R=["onClick"],J={class:"InlineBlock AlignementHaut",style:{width:"64%"}},K={class:"Gras"},W={key:0,class:"collection with-header bg-white bulletin scroll"},X=["onClick"],Y={class:"evaluations-conteneur"},Z={class:"description"},$={class:"text-h5"},ee={class:"collection bg-white bulletin"},te={class:"collection-item"},se={class:"evaluations-conteneur"},ie={class:"description"},ae={class:"evaluations-conteneur q-pl-sm"},le={class:"description"};function ne(i,e,l,a,s,c){const p=P("ep-pagination"),m=P("evaluation"),V=P("ep-footer");return d(),u(h,null,[n(U,{padding:"",class:"page-content"},{default:o(()=>[t("div",G,[i.data?(d(),f(p,{key:0,modelValue:s.sem,"onUpdate:modelValue":[e[0]||(e[0]=r=>s.sem=r),c.getData],max:2,"direction-links":"","boundary-links":!1,div:"",divClass:"full-width text-center text-white text-bold",dark:"",color:"white",class:"bg-primary full-width",style:{"border-radius":"10rem",height:"30px"}},{content:o(()=>[F(" Semestre "+g(s.sem),1)]),_:1},8,["modelValue","onUpdate:modelValue"])):k("",!0)]),i.data?(d(),f(D,{key:0,style:{margin:"0 -8px 0"},flat:""},{default:o(()=>[t("ul",z,[(d(!0),u(h,null,N(i.data,(r,y)=>(d(),u("li",{key:"suivi"+y,onClick:b=>c.open(r),class:"collection-item with-action bg-white",style:{padding:"3px 12px"}},[t("div",{style:E("padding: 10px 5px; border-left: 5px solid "+c.color(r))},[t("div",J,[t("div",K,g(c.discipline(r)),1)]),n(m,{class:"InineBlock AlignementHaut AlignementDroit",style:{width:"35%",float:"right"},data:r,sem:s.sem},null,8,["data","sem"])],4)],8,R))),128))])]),_:1})):k("",!0)]),_:1}),n(V,{to:"#footer-portal"},{default:o(()=>[n(v,{flat:"",onClick:e[1]||(e[1]=r=>s.legende=!0),icon:"help"})]),_:1}),n(O,{modelValue:s.alert,"onUpdate:modelValue":e[2]||(e[2]=r=>s.alert=r),maximized:""},{default:o(()=>[n(D,{class:"column full-height relative-position"},{default:o(()=>[n(w,{class:"row items-center q-pb-none"},{default:o(()=>[n(M),A(n(v,{icon:"close",flat:"",round:"",dense:""},null,512),[[x]])]),_:1}),s.item?(d(),u("ul",W,[n(m,{class:"collection-header with-action jauge-conteneur",data:s.item,sem:s.sem,courbe:!0,tag:"li"},null,8,["data","sem"]),(d(!0),u(h,null,N(s.item,(r,y)=>(d(),u("li",{key:"d"+y,onClick:b=>c.openDetails(r),class:"collection-item with-action"},[t("div",Y,[t("div",Z,g(r.text),1),n(m,{class:"InineBlock AlignementHaut AlignementDroit",style:{width:"35%",float:"right"},data:[r],sem:s.sem},null,8,["data","sem"])])],8,X))),128))])):k("",!0),n(B,{align:"right",class:"bg-white"},{default:o(()=>[A((d(),f(v,{flat:""},{default:o(()=>e[5]||(e[5]=[F("Fermer")])),_:1})),[[x]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s.details?(d(),f(O,{key:0,modelValue:s.detailsAlert,"onUpdate:modelValue":e[3]||(e[3]=r=>s.detailsAlert=r),position:"bottom","full-width":""},{default:o(()=>[n(D,{class:"full-width relative-position"},{default:o(()=>[n(w,{class:"row items-center q-pb-none"},{default:o(()=>[n(M),A(n(v,{icon:"close",flat:"",round:"",dense:""},null,512),[[x]])]),_:1}),n(w,null,{default:o(()=>[t("div",$,g(s.details.text),1)]),_:1}),t("ul",ee,[(d(!0),u(h,null,N(s.details.children,(r,y)=>(d(),u(h,{key:"dt"+y},[t("li",te,[t("div",se,[t("div",ie,g(r.text),1),n(m,{class:"InineBlock AlignementHaut AlignementDroit",style:{width:"35%",float:"right"},data:[r],sem:s.sem,cachenombre:r.data.isLeaf},null,8,["data","sem","cachenombre"])])]),r.children?(d(!0),u(h,{key:0},N(r.children,(b,Q)=>(d(),u("li",{key:"sdt"+Q,class:"collection-item"},[t("div",ae,[e[6]||(e[6]=t("div",{class:"full-height absolute-left q-pa-sm",style:{"border-right":"1px solid #e2e2e2"}},null,-1)),t("div",le,g(b.text),1),n(m,{class:"InineBlock AlignementHaut AlignementDroit",style:{width:"35%",float:"right"},data:[b],sem:s.sem,cachenombre:b.data.isLeaf},null,8,["data","sem","cachenombre"])])]))),128)):k("",!0)],64))),128))]),n(B,{align:"right",class:"bg-white"},{default:o(()=>[A((d(),f(v,{flat:""},{default:o(()=>e[7]||(e[7]=[F("Fermer")])),_:1})),[[x]])]),_:1})]),_:1})]),_:1},8,["modelValue"])):k("",!0),n(O,{modelValue:s.legende,"onUpdate:modelValue":e[4]||(e[4]=r=>s.legende=r),position:"bottom","full-width":""},{default:o(()=>[n(D,{class:"relative-position"},{default:o(()=>[n(w,null,{default:o(()=>e[8]||(e[8]=[t("div",{class:"text-h5"},"Légende",-1)])),_:1}),n(w,null,{default:o(()=>e[9]||(e[9]=[t("div",null,"Niveau de maîtrise",-1),t("div",{style:{"padding-left":"1rem","padding-top":"0.5rem"}},[t("span",{style:{display:"inline-block",width:"2rem","text-align":"center"}},[t("span",{class:"NiveauAcquisition NiveauAcquisition_Pastille",style:{"background-color":"#008000",color:"#FFFFFF"},title:"Très bonne maîtrise","aria-label":"Très bonne maîtrise"}," ")]),t("span",{style:{"padding-left":"1.2rem"}},"Très bonne maîtrise")],-1),t("div",{style:{"padding-left":"1rem","padding-top":"0.5rem"}},[t("span",{style:{display:"inline-block",width:"2rem","text-align":"center"}},[t("span",{class:"NiveauAcquisition NiveauAcquisition_Pastille",style:{"background-color":"#45B851"},title:"Maîtrise satisfaisante","aria-label":"Maîtrise satisfaisante"}," ")]),t("span",{style:{"padding-left":"1.2rem"}},"Maîtrise satisfaisante")],-1),t("div",{style:{"padding-left":"1rem","padding-top":"0.5rem"}},[t("span",{style:{display:"inline-block",width:"2rem","text-align":"center"}},[t("span",{class:"NiveauAcquisition NiveauAcquisition_Pastille",style:{"background-color":"#ADDE1F"},title:"Presque maîtrisé","aria-label":"Presque maîtrisé"}," ")]),t("span",{style:{"padding-left":"1.2rem"}},"Presque maîtrisé")],-1),t("div",{style:{"padding-left":"1rem","padding-top":"0.5rem"}},[t("span",{style:{display:"inline-block",width:"2rem","text-align":"center"}},[t("span",{class:"NiveauAcquisition NiveauAcquisition_Pastille",style:{"background-color":"#FFDA01"},title:"Maîtrise fragile","aria-label":"Maîtrise fragile"}," ")]),t("span",{style:{"padding-left":"1.2rem"}},"Maîtrise fragile")],-1),t("div",{style:{"padding-left":"1rem","padding-top":"0.5rem"}},[t("span",{style:{display:"inline-block",width:"2rem","text-align":"center"}},[t("span",{class:"NiveauAcquisition NiveauAcquisition_Pastille",style:{"background-color":"#FF880F"},title:"Début de maîtrise","aria-label":"Début de maîtrise"}," ")]),t("span",{style:{"padding-left":"1.2rem"}},"Début de maîtrise")],-1),t("div",{style:{"padding-left":"1rem","padding-top":"0.5rem"}},[t("span",{style:{display:"inline-block",width:"2rem","text-align":"center"}},[t("span",{class:"NiveauAcquisition NiveauAcquisition_Pastille",style:{"background-color":"#F80A0A"},title:"Maîtrise insuffisante","aria-label":"Maîtrise insuffisante"}," ")]),t("span",{style:{"padding-left":"1.2rem"}},"Maîtrise insuffisante")],-1)])),_:1}),n(H),n(B,{align:"right",class:"bg-white"},{default:o(()=>[A((d(),f(v,{flat:""},{default:o(()=>e[10]||(e[10]=[F("Fermer")])),_:1})),[[x]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const fe=j(T,[["render",ne]]);export{fe as default};
