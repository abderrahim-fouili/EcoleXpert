import{q as P}from"./date-C1Mon-Jj.js";import{_ as S,B as i,a4 as n,S as r,a8 as t,R as u,ab as s,a9 as p,aa as _}from"./index-Bl2lQPd7.js";import"./format-IcNrutKL.js";const x={class:"report-container canteen-ticket-holders-report"},I={class:"invoice-header"},A={class:"logo-section"},R={class:"logo-placeholder"},D=["src"],N={key:0,class:"partner-logo-section"},C=["src"],E={class:"report-main-title"},L={class:"report-meta"},U={class:"report-meta"},$={key:0,class:"report-meta"},Y={key:1,class:"ticket-data-section"},B={key:0,class:"report-table-container"},H={class:"report-table-title"},M={class:"report-table"},F={class:"text-right"},O={class:"text-right bold"},j={key:1,class:"report-table-container"},q={class:"report-table-title"},G={class:"report-table"},V={class:"text-right"},w={class:"text-right bold"},z={key:2,class:"report-table-container"},Q={class:"report-table-title"},J={class:"report-table"},K={class:"text-right"},W={class:"report-summary-section"},X={class:"summary-table"},Z={class:"text-right"},tt={class:"text-right"},et={class:"grand-total"},st={class:"text-right bold"},at={class:"text-right"},lt={key:2,class:"no-data"},ot={__name:"CanteenTicketHoldersReport",props:{stats:{type:Object,required:!0,default:()=>({detailed_lists:{}})},schoolInfo:{type:Object,default:()=>({name:"LYCEE FRANÇAIS GUY DE MAUPASSANT",addressLine1:"Quartier Almaz, Rocade Sud-Ouest",city:"Casablanca",contactEmail:"encaissements@lfmaupassant.com",paymentEmail:"encaissements@lfmaupassant.com",phone:"(+212) 522 65 43 00",logoUrl:"placeholder-logo-lycee.png"})},partnerInfo:{type:Object,default:()=>({logoUrl:"placeholder-logo-aefe.png",nameLine1:"Agence pour",nameLine2:"l'enseignement français",nameLine3:"à l'étranger"})}},setup(l){const o=l,d=h=>typeof h!="number"?"N/A":h.toFixed(2).replace(".",",")+" MAD",k=i(()=>P.formatDate(Date.now(),"DD/MM/YYYY HH:mm")),T=i(()=>o.stats?`Recette des Tickets Cantine ${o.stats.date?`du ${o.stats.date}`:o.stats.date_range?`du ${o.stats.date_range.start} au ${o.stats.date_range.end}`:o.stats.program?`Programme du ${o.stats.program.date}`:"Période Actuelle"}`:"Recette des Tickets Cantine"),m=i(()=>o.stats?.detailed_lists?.ticket_students||[]),v=i(()=>o.stats?.detailed_lists?.ticket_students_total_tarif||0),g=i(()=>o.stats?.detailed_lists?.served_staff_paid||[]),f=i(()=>o.stats?.detailed_lists?.served_staff_paid_total_tarif||0),c=i(()=>o.stats?.detailed_lists?.served_staff_unpaid||[]),y=i(()=>o.stats?.total_revenue_from_tickets||0),b=i(()=>m.value.length>0||g.value.length>0||c.value.length>0);return(h,e)=>(r(),n("div",x,[t("header",I,[t("div",A,[t("div",R,[t("img",{src:l.schoolInfo.logoUrl||"placeholder-logo-lycee.png",style:{height:"60px"}},null,8,D)]),e[0]||(e[0]=t("div",{class:"school-info"},null,-1))]),l.partnerInfo&&l.partnerInfo.logoUrl?(r(),n("div",N,[e[1]||(e[1]=t("div",{class:"etablissement-partenaire"},"ÉTABLISSEMENT PARTENAIRE",-1)),t("img",{src:l.partnerInfo.logoUrl||"placeholder-logo-aefe.png",class:"aefe-logo"},null,8,C)])):u("",!0)]),t("h1",E,s(T.value),1),t("p",L," Période: "+s(l.stats.date||(l.stats.date_range?`${l.stats.date_range.start} au ${l.stats.date_range.end}`:l.stats.program?`Programme du ${l.stats.program.date}`:"Période Inconnue")),1),t("p",U,"Date d'impression: "+s(k.value),1),l.stats.program?(r(),n("div",$," Description du Programme: "+s(l.stats.program.description||"N/A")+" (ID: "+s(l.stats.program.id)+") ",1)):u("",!0),b.value?(r(),n("div",Y,[m.value.length>0?(r(),n("div",B,[t("h3",H,"Élèves Servis avec Ticket ("+s(m.value.length)+")",1),t("table",M,[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",null,"Nom"),t("th",null,"Classe"),t("th",{class:"text-right"},"Tarif")])],-1)),t("tbody",null,[(r(!0),n(p,null,_(m.value,a=>(r(),n("tr",{key:a.id||a.name},[t("td",null,s(a.name),1),t("td",null,s(a.class),1),t("td",F,s(d(a.ticket_tarif)),1)]))),128))]),t("tfoot",null,[t("tr",null,[e[2]||(e[2]=t("td",{colspan:"2",class:"text-right bold"},"Total (Élèves avec Ticket):",-1)),t("td",O,s(d(v.value)),1)])])])])):u("",!0),g.value.length>0?(r(),n("div",j,[t("h3",q,"Personnel Servi (Tickets Payés) ("+s(g.value.length)+")",1),t("table",G,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",null,"Nom"),t("th",{class:"text-right"},"Tarif Payé")])],-1)),t("tbody",null,[(r(!0),n(p,null,_(g.value,a=>(r(),n("tr",{key:a.id||a.name},[t("td",null,s(a.name),1),t("td",V,s(d(a.ticket_tarif)),1)]))),128))]),t("tfoot",null,[t("tr",null,[e[4]||(e[4]=t("td",{class:"text-right bold"},"Total (Personnel Tickets Payés):",-1)),t("td",w,s(d(f.value)),1)])])])])):u("",!0),c.value.length>0?(r(),n("div",z,[t("h3",Q,"Personnel Servi (Tickets Impayés) ("+s(c.value.length)+")",1),t("table",J,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",null,"Nom"),t("th",null,"Statut Ticket"),t("th",{class:"text-right"},"Tarif")])],-1)),t("tbody",null,[(r(!0),n(p,null,_(c.value,a=>(r(),n("tr",{key:a.id||a.name},[t("td",null,s(a.name),1),e[6]||(e[6]=t("td",null,s("Impayé"),-1)),t("td",K,s(d(a.ticket_tarif)),1)]))),128))])])])):u("",!0),t("div",W,[e[12]||(e[12]=t("h2",{class:"report-section-title"},"Résumé Financier des Tickets (Personnes Servies)",-1)),t("table",X,[t("tbody",null,[t("tr",null,[e[8]||(e[8]=t("td",null,"Total Recettes (Tickets Élèves Servis):",-1)),t("td",Z,s(d(v.value)),1)]),t("tr",null,[e[9]||(e[9]=t("td",null,"Total Recettes (Tickets Personnel Payés Servis):",-1)),t("td",tt,s(d(f.value)),1)]),t("tr",et,[e[10]||(e[10]=t("td",{class:"bold"},"Total Général des Recettes (Tickets Servis):",-1)),t("td",st,s(d(y.value)),1)]),t("tr",null,[e[11]||(e[11]=t("td",null,"Nombre de Personnel Servi (Tickets Impayéss):",-1)),t("td",at,s(c.value.length),1)])])])])])):(r(),n("div",lt," Aucune donnée de ticket à afficher pour cette période. "))]))}},dt=S(ot,[["__scopeId","data-v-28acfa00"]]);export{dt as default};
