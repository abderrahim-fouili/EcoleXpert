import{_ as h,as as _,at as g,a4 as f,S as i,a8 as y,a5 as s,a6 as t,a9 as m,aa as v,av as Q,Q as c,R as d,a7 as k,ay as x,ad as l,ab as p,aw as j,aE as A,d3 as C,b3 as L}from"./index-Bl2lQPd7.js";import{Q as q,a as u}from"./QItem-De3v03wU.js";import{Q as o}from"./QItemLabel-BkJiB6aE.js";import{Q as w}from"./QList-CMzNTEGD.js";import{f as D}from"./index-C9ZTL5MN.js";import{q as M}from"./format-IcNrutKL.js";import"./index-BXMW6yyY.js";import"./index-CbPSoDvq.js";const B={emits:["abs:justifier"],computed:{...g({user:"user/user",config:"user/config",current:"user/current",absencesList:"absence/absences",form:"absence/form"}),absences(){return this.absencesList&&this.absencesList.data?this.absencesList.data:[]},eleve(){if(this.current&&this.current.hasOwnProperty("eleve"))return this.current.eleve},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee}},methods:{..._({getConfig:"user/getConfig",getAbsences:"absence/getAbsences"}),toDate(e){try{return M.capitalize(D(L(e),"E dd MMM yyyy"))}catch(a){return console.log(e),console.error(a),""}},sub(e){return this.$cleanHtml(e,{allowedTags:["b","i","em","strong","a"]})},timeManque(e){return C(0,e.duree_absence*60*1e3)},justifier(e){e.justifier||this.$emit("abs:justifier",{abs:e,title:"Justifier"})}},mounted(){this.setTitle("Absences"),this.absences.length||this.getAbsences({page:1,filter:{eleve_id:this.eleve.idpers,type:1,classe:this.annee.pivot.idclasse}})}};function I(e,a,N,S,V,n){return i(),f(m,null,[a[1]||(a[1]=y("div",{class:"q-pa-lg flex flex-center"},null,-1)),s(A,{style:{margin:"0 -8px"},flat:""},{default:t(()=>[s(w,null,{default:t(()=>[(i(!0),f(m,null,v(n.absences,(r,b)=>Q((i(),c(q,{key:b,clickable:"",onClick:E=>n.justifier(r)},{default:t(()=>[s(u,{avatar:""},{default:t(()=>[s(k,null,{default:t(()=>[r.justifier?d("",!0):(i(),c(x,{key:0,name:"icon_exclamation",color:"red"}))]),_:2},1024)]),_:2},1024),s(u,null,{default:t(()=>[s(o,{lines:"1",class:"abs-title"},{default:t(()=>[l(p(n.toDate(r.date_absence)),1)]),_:2},1024),s(o,{caption:"",lines:"1"},{default:t(()=>[l(p(n.timeManque(r))+" de cours manquées ",1)]),_:2},1024)]),_:2},1024),r.justifier?d("",!0):(i(),c(u,{key:0,side:"",top:""},{default:t(()=>[s(o,{caption:""},{default:t(()=>a[0]||(a[0]=[l(" à justifier ")])),_:1})]),_:1}))]),_:2},1032,["onClick"])),[[j]])),128))]),_:1})]),_:1})],64)}const H=h(B,[["render",I]]);export{H as default};
