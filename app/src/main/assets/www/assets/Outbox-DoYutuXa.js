import{Q as h}from"./QImg-BMvxJu3S.js";import{Q as _}from"./QBadge-Bjfo5tRO.js";import{_ as b,aY as k,b8 as v,b9 as x,b2 as Q,ba as y,as as w,at as L,Q as c,S as n,a6 as e,a5 as a,a4 as d,a9 as f,aa as p,av as C,a7 as I,ad as i,ab as o,R as M,a8 as A,ah as B,ay as N,aw as q,aE as D,be as U,aB as O}from"./index-Bl2lQPd7.js";import{Q as R,a as m}from"./QItem-De3v03wU.js";import{Q as l}from"./QItemLabel-BkJiB6aE.js";import{Q as T}from"./QList-CMzNTEGD.js";import{q as V}from"./date-C1Mon-Jj.js";import"./format-IcNrutKL.js";const j={computed:{...L({user:"user/user",config:"user/config",links:"user/nav",current:"user/current",messagesList:"message/outbox",darkMode:"darkMode"}),messages(){return this.messagesList&&this.messagesList.data?this.messagesList.data:[]},classe(){if(this.current&&this.current.hasOwnProperty("classe"))return this.current.classe},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee},dark:{get(){return this.darkMode},set(r){this.toggleDarkMode()}}},methods:{...w({getConfig:"user/getConfig",getMessages:"message/getOutbox"}),LetterAvatar:y,toNow:Q,fileIcon:x,openURL:v,pjUrl:k,personAvatar(r){return O(r)},sub(r){return U(this.$cleanHtml(r,{allowedTags:["b","i","em","strong","a"]}))},date(r){return V.formatDate(r*1e3)}},mounted(){this.getMessages({page:1})}},P=["onClick"];function S(r,E,H,z,F,t){return n(),c(D,{style:{margin:"0 -8px"},flat:""},{default:e(()=>[a(T,null,{default:e(()=>[(n(!0),d(f,null,p(t.messages,(s,g)=>C((n(),c(R,{key:g,clickable:"",to:"/prof/messages/view/"+s.id},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(I,null,{default:e(()=>[a(h,{src:t.personAvatar(s.sender),"placeholder-src":t.LetterAvatar(s.sender.nom)},null,8,["src","placeholder-src"]),a(_,{floating:"",transparent:"",color:"secondary"},{default:e(()=>[i(o(s.type_sender),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(m,null,{default:e(()=>[a(l,{lines:"1"},{default:e(()=>[A("span",null,o(s.sender.nom)+" "+o(s.sender.prenom),1)]),_:2},1024),a(l,{lines:"1"},{default:e(()=>[i(o(s.objet),1)]),_:2},1024),a(l,{caption:"",lines:"1"},{default:e(()=>[i(o(t.sub(s.message)),1)]),_:2},1024),s.fichiers.length?(n(),c(l,{key:0,lines:"1"},{default:e(()=>[(n(!0),d(f,null,p(s.fichiers,(u,G)=>(n(),d("div",{outline:"",color:"grey-9",onClick:B(Y=>t.openURL(t.pjUrl(u)),["prevent"]),class:"ellipsis rounded-borders q-mr-xs q-pa-xs",style:{"max-width":"40%",display:"inline-block",border:"1px solid var(--q-primary)"}},[a(N,{name:"img:"+t.fileIcon(u.fichier),size:"14px"},null,8,["name"]),i(" "+o(u.fichier),1)],8,P))),256))]),_:2},1024)):M("",!0)]),_:2},1024),a(m,{side:"",top:""},{default:e(()=>[a(l,{caption:""},{default:e(()=>[i(o(t.toNow(s.created_at*1e3)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"])),[[q]])),128))]),_:1})]),_:1})}const se=b(j,[["render",S]]);export{se as default};
