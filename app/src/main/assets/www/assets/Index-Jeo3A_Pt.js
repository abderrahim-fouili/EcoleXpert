import"./QParallax-fj04-fjI.js";import{aO as te,aP as ae,A as se,B as o,aQ as le,Y as oe,C as re,aR as ne,ag as C,Q as v,S as r,a6 as e,a8 as i,a4 as y,R as g,a5 as l,aE as b,a7 as ie,aF as x,ab as d,ad as u,a9 as S,aa as V,av as de,aS as f,ac as ue,aw as ce,aC as pe,aB as ve}from"./index-Bl2lQPd7.js";import{Q as ge,a as A}from"./QItem-De3v03wU.js";import{Q as me}from"./QBadge-Bjfo5tRO.js";import{Q as B}from"./QItemLabel-BkJiB6aE.js";import{Q as _e}from"./QList-CMzNTEGD.js";import{Q as fe}from"./QImg-BMvxJu3S.js";import{D as he}from"./Devoir-BVG5z-GF.js";import{_ as ye}from"./PlatDuJourCard-_8r8QfGN.js";import{u as xe,a as we}from"./composables-CAkrP3jA.js";import{f as M}from"./index-C9ZTL5MN.js";import{a as P}from"./index-B29DxFTF.js";import"./groupBy-BgHPVcz-.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./_curry1-CPMemvwC.js";import"./_xfBase-ZXVHuZFu.js";import"./_reduce-BZMr9wpn.js";import"./_isArrayLike-B3kKjEvQ.js";import"./index-Dx01H97j.js";import"./index-CbPSoDvq.js";import"./date-C1Mon-Jj.js";import"./format-IcNrutKL.js";import"./index-BXMW6yyY.js";const be={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-8"};const ke={key:1,class:"md:col-span-2 lg:col-span-3",style:{padding:"0",margin:"36px -8px 0"}},Qe={key:2,class:"md:col-span-2 lg:col-span-3"},De={class:"full-width text-center"},Ce={class:"",style:{padding:"16px 8px 14px"}},Se={class:"objetInterfaceMobile_zoneSelection w-full"},Be={class:"ObjetCelluleDate input-wrapper design-mobile selecteur-mobile"},Me={style:{flex:"1 1 auto"}},Ne={class:"input-wrapper"},Ve={class:"ocb_cont as-input"},Ae={class:"ie-ellipsis text-center"},Pe={class:"flex items-start justify-center"},rt={__name:"Index",setup(Ie){const{setTitle:I,showFooter:T,$cleanHtml:j}=xe();te();const t=ae(),m=se(new Date),{platDuJour:E,loading:z,error:J,fetchPlatDuJour:L}=we();o(()=>t.getters["user/user"]);const k=o(()=>t.getters["ds/settings"]);o(()=>t.getters["user/config"]),o(()=>t.getters["user/nav"]);const c=o(()=>t.getters["user/current"]),Q=o(()=>t.getters["actualite/data"]),h=o(()=>t.getters["devoirs/devoirsAvenir"]),_=o(()=>t.getters["user/rappel"]),O=o(()=>t.getters["emploi/data"]),R=o(()=>t.getters.darkMode),w=o(()=>{let a=[];return Q.value&&Q.value.data?(a=Q.value.data.slice(0,7),a.map(s=>({title:s.objet,img:le(s.contenu),contenu:W(s.contenu),id:s.id}))):[]}),$=o(()=>{if(c.value&&c.value.hasOwnProperty("eleve"))return c.value.eleve}),p=o(()=>{if(c.value&&c.value.hasOwnProperty("annee"))return c.value.annee}),q=o(()=>{if(c.value&&c.value.hasOwnProperty("annee"))return c.value.annee.pivot.classes});o({get(){return R.value},set(){t.dispatch("toggleDarkMode")}});function F(a){return a&&a.ds&&a.ds.length}function G(a){t.dispatch("devoirs/getDevoirsAvenir",{page:1,filter:{annee:p.value.idannee,classe:p.value.pivot.idclasse}}).then(()=>{a()})}function H(a){if(k.value&&k.value.types){let s=k.value.types.find(D=>D.value===a);if(s)return s.label}return null}function U(){m.value=P(m.value,-1)}function Y(){m.value=P(m.value,1)}function Te(a){return ve(a)}function K(){return{annee:p.value.idannee,classe:[q.value.idclasse]}}function W(a){return j(a,{allowedTags:["b","i","em","strong","a"]})}return oe(p,()=>{t.dispatch("devoirs/getDevoirsAvenir",{page:1,filter:{annee:p.value.idannee,classe:p.value.pivot.idclasse}})}),re(()=>{T(!1),w.value.length||t.dispatch("actualite/getData",{page:1}),t.dispatch("ds/getSettings").then(()=>{t.dispatch("user/rappel",K())}),I("Page d'accueil"),L(),ne(()=>{t.dispatch("devoirs/getDevoirsAvenir",{page:1,filter:{annee:p.value.idannee,classe:p.value.pivot.idclasse}})}),t.dispatch("setRefresh",G)}),(a,s)=>{const D=C("slide"),X=C("carousel-3d"),Z=C("el-calendar");return r(),v(pe,{padding:"",class:"page-content"},{default:e(()=>[i("div",be,[($.value,g("",!0)),_.value&&F(_.value)?(r(),y("div",ke,[l(b,{class:"q-mb-md widget rappel-mnemonique"},{default:e(()=>[l(x,{style:{"text-align":"center","font-weight":"bold"}},{default:e(()=>[u(d(_.value.titre),1)]),_:1}),_.value.ds&&_.value.ds.length?(r(!0),y(S,{key:0},V(_.value.ds,(n,N)=>(r(),v(_e,null,{default:e(()=>[de((r(),v(ge,{clickable:"",onClick:s[0]||(s[0]=ee=>a.go("/parent/ds"))},{default:e(()=>[l(A,{top:"",avatar:""},{default:e(()=>[l(ie,{color:"primary","text-color":"white",square:"",size:"xxl",class:"date_avatar"},{default:e(()=>[u(d(f(M)(new Date(n.date_ds),"d MMM")),1)]),_:2},1024)]),_:2},1024),l(A,null,{default:e(()=>[l(B,{class:"ds-mat"},{default:e(()=>[l(me,{style:ue({"background-color":n.matiere.color})},{default:e(()=>[u(d(H(n.type)),1)]),_:2},1032,["style"]),u(" "+d(n.matiere.description),1)]),_:2},1024),l(B,null,{default:e(()=>[u(d(n.titre),1)]),_:2},1024),l(B,{caption:""},{default:e(()=>[u("le "+d(f(M)(new Date(n.date_ds),"E dd MMM"))+" - "+d(n.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[ce]])]),_:2},1024))),256)):g("",!0)]),_:1})])):g("",!0),w.value.length?(r(),y("div",Qe,[l(x,{style:{"text-align":"center","font-weight":"bold"}},{default:e(()=>s[1]||(s[1]=[u("Actualités")])),_:1}),l(X,{width:300,border:0,autoplay:!0,autoplayTimeout:1e4,style:{"margin-top":"0px"},count:w.value.length},{default:e(()=>[(r(!0),y(S,null,V(w.value,(n,N)=>(r(),v(D,{index:N,style:{width:"100%"}},{default:e(()=>[l(b,{flat:"",bordered:"",onClick:ee=>a.go("/actualites/"+n.id)},{default:e(()=>[n.img?(r(),v(fe,{key:0,src:n.img,style:{"max-height":"260px"},class:"bg-secondary"},{default:e(()=>[i("div",De,d(n.title),1)]),_:2},1032,["src"])):(r(),y(S,{key:1},[l(x,{class:"text-white text-bold text-center bg-secondary"},{default:e(()=>[u(d(n.title),1)]),_:2},1024),g("",!0)],64))]),_:2},1032,["onClick"])]),_:2},1032,["index"]))),256))]),_:1},8,["count"])])):g("",!0),h.value&&h.value.data.length?(r(),v(b,{key:3,class:""},{default:e(()=>[l(x,{style:{"text-align":"center","font-weight":"bold"}},{default:e(()=>s[2]||(s[2]=[u("Travail à faire pour les prochains jours")])),_:1}),h.value&&h.value.data.length?(r(),v(he,{key:0,devoirs:h.value.data},null,8,["devoirs"])):(r(),v(x,{key:1},{default:e(()=>s[3]||(s[3]=[u(" Aucun travail à faire ")])),_:1}))]),_:1})):g("",!0),l(b,{class:""},{default:e(()=>[i("div",Ce,[i("div",Se,[i("div",Be,[i("i",{class:"icon_angle_left btnImage text-white",style:{flex:"none"},onClick:U}),i("div",Me,[i("div",Ne,[i("div",Ve,[i("div",Ae,d(f(M)(m.value,"E dd MMM")),1)])])]),i("i",{r:"",class:"icon_angle_right btnImage text-white",style:{flex:"none"},onClick:Y})])])]),l(Z,{events:O.value,date:m.value,annee:p.value},null,8,["events","date","annee"])]),_:1}),i("div",Pe,[!f(z)&&!f(J)?(r(),v(ye,{key:0,programme:f(E)},null,8,["programme"])):g("",!0)])])]),_:1})}}};export{rt as default};
