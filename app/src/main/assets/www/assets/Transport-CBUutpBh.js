import{_ as q,as as I,at as N,Q as o,S as r,a6 as a,a8 as c,a5 as s,R as p,a4 as g,a9 as _,aa as v,ax as x,ad as u,ab as f,a7 as R,ay as y,aD as T,aE as L,av as C,aF as w,a3 as P,aw as E,aC as F,b8 as U,aB as z}from"./index-Bl2lQPd7.js";import{Q}from"./QItemLabel-BkJiB6aE.js";import{Q as D,a as k}from"./QItem-De3v03wU.js";import{Q as m}from"./QBadge-Bjfo5tRO.js";import{Q as G}from"./QExpansionItem-EMhshZ_3.js";import{Q as O}from"./QList-CMzNTEGD.js";import{Q as j}from"./QSpace-CKKoNTi_.js";import{C as H}from"./ClosePopup-BY_YGFBZ.js";import"./QSlideTransition-CrdUnXBf.js";const J={data(){return{show:!1,e:null,trips:["","aller","retour","aller-retour"]}},computed:{...N({config:"user/config",user:"user/user",data:"transport/data"})},methods:{...I({getData:"transport/getData",valid:"transport/valid"}),isSortie(e,t){return this.data.data[e.idauto].sorties.length?this.data.data[e.idauto].sorties.includes(t.idpers):!1},isValid(e,t){return this.data.data[e.idauto].statues.length?this.data.data[e.idauto].statues.some(h=>h.idpers===t.idpers):!1},isAbsent(e,t){return this.data.data[e.idauto].absences.length?this.data.data[e.idauto].absences.some(h=>h.idpers===t.idpers):!1},validate(e,t){this.valid({idauto:e.idauto,idpers:t.idpers}).then(()=>{this.getData()})},openDialog(e){this.e=e,this.show=!0},personAvatar(e){return z(e)},trip(e){if(e.trip&&e.trip>0)return this.trips[e.trip]},tel(e){if(e.length>=9)return e.replace(212,0)},adresse(){this.e&&this.e.adresse&&U("https://www.google.com/maps/search/?api=1&query="+this.e.adresse)}},mounted(){this.getData(),this.showFooter(!1),this.setTitle("TRANSPORT")}},K={style:{padding:"0"}},M=["src"],W={style:{"padding-top":"10px"}},X={class:"flex flex-center",style:{"max-width":"85%"}};function Y(e,t,h,Z,i,n){return r(),o(F,{class:"page-content"},{default:a(()=>[c("div",K,[e.data&&e.data.autos?(r(),o(O,{key:0,style:{margin:"0"},flat:""},{default:a(()=>[(r(!0),g(_,null,v(e.data.autos,(d,S)=>(r(),o(G,{key:S,"expand-icon-class":"text-white",class:"shadow-1 overflow-hidden",icon:"icon_bus","header-class":"bg-secondary text-white","expand-separator":"","default-opened":"",label:d.marque+" | "+d.matricule+" | "+d.chaufeur.nom+" "+d.chaufeur.prenom},{default:a(()=>[s(x),(r(!0),g(_,null,v(d.secteur,(b,V)=>(r(),g(_,{key:"s"+V},[s(Q,{header:""},{default:a(()=>[u(f(b.description),1)]),_:2},1024),(r(!0),g(_,null,v(b.eleve,(l,A)=>(r(),o(D,{key:"e"+A,clickable:""},{default:a(()=>[s(k,{avatar:"",onClick:B=>n.openDialog(l)},{default:a(()=>[s(R,{square:"",size:"xl"},{default:a(()=>[c("img",{src:n.personAvatar(l)},null,8,M)]),_:2},1024)]),_:2},1032,["onClick"]),s(k,{onClick:B=>n.openDialog(l)},{default:a(()=>[s(Q,{lines:"1",style:{"font-weight":"600"}},{default:a(()=>[u(f(l.nom)+" "+f(l.prenom),1)]),_:2},1024),s(Q,{lines:"2"},{default:a(()=>[l.trip>0?(r(),o(m,{key:0,color:"grey"},{default:a(()=>[u(f(n.trip(l)),1)]),_:2},1024)):p("",!0),t[1]||(t[1]=u()),t[2]||(t[2]=c("br",null,null,-1)),l.classes.length?(r(),o(m,{key:1,color:"secondary"},{default:a(()=>[u(f(l.classes[0].bref),1)]),_:2},1024)):p("",!0)]),_:2},1024)]),_:2},1032,["onClick"]),s(k,{side:""},{default:a(()=>[c("div",null,[n.isAbsent(d,l)?(r(),o(m,{key:0,color:"negative"},{default:a(()=>[s(y,{name:"icon_absences",class:"q-mr-xs"}),t[3]||(t[3]=u(" Absent"))]),_:1})):p("",!0),n.isSortie(d,l)?(r(),o(m,{key:1,color:"info"},{default:a(()=>[s(y,{name:"icon_voiture",class:"q-mr-xs"}),t[4]||(t[4]=u(" Sortie"))]),_:1})):p("",!0)]),c("div",W,[n.isValid(d,l)?(r(),o(m,{key:0,color:"positive"},{default:a(()=>[s(y,{name:"done",class:"q-mr-xs"}),t[5]||(t[5]=u(" ValidÃ©"))]),_:1})):p("",!0)])]),_:2},1024)]),_:2},1024))),128)),s(x)],64))),128))]),_:2},1032,["label"]))),128))]),_:1})):p("",!0)]),s(T,{modelValue:i.show,"onUpdate:modelValue":t[0]||(t[0]=d=>i.show=d),position:"bottom",maximized:""},{default:a(()=>[i.e?(r(),o(L,{key:0},{default:a(()=>[s(w,{class:"row",style:{"font-weight":"600"}},{default:a(()=>[c("div",X,f(i.e.nom)+" "+f(i.e.prenom),1),s(j),C(s(P,{icon:"close",flat:"",round:"",dense:""},null,512),[[H]])]),_:1}),i.e.classes.length?(r(),o(w,{key:0},{default:a(()=>[c("span",null,f(i.e.classes[0].classe_fr),1)]),_:1})):p("",!0),s(w,{onClick:n.adresse},{default:a(()=>[u(f(i.e.adresse),1)]),_:1},8,["onClick"]),C((r(),o(D,{href:"tel:"+n.tel(i.e.gsm)},{default:a(()=>[s(k,null,{default:a(()=>[s(Q,null,{default:a(()=>[s(y,{name:"phone"}),u(" "+f(n.tel(i.e.gsm)),1)]),_:1})]),_:1})]),_:1},8,["href"])),[[E]])]),_:1})):p("",!0)]),_:1},8,["modelValue"])]),_:1})}const ne=q(J,[["render",Y]]);export{ne as default};
