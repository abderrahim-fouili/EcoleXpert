import{_ as b,as as k,at as w,ag as C,Q as f,S as d,a6 as g,a8 as n,R as p,ad as O,ab as u,aE as M,a4 as m,a9 as h,aa as _,ac as N,aC as B}from"./index-Bl2lQPd7.js";import{f as I}from"./find-DmKWGD7T.js";import{g as R}from"./groupBy-BgHPVcz-.js";import{f as D,p as P}from"./index-ktPCo2xP.js";import{u as V}from"./uniq-Ctdwyxtg.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./_xfBase-ZXVHuZFu.js";import"./_curry1-CPMemvwC.js";import"./_reduce-BZMr9wpn.js";import"./_isArrayLike-B3kKjEvQ.js";import"./keys-DVw6zMdc.js";function y(a,e){return R(e,a)}const H={data(){return{sem:1,discs:[]}},computed:{...w({user:"user/user",config:"user/config",current:"user/current",notesRaw:"notes/notes",notesRawCls:"notes/notesCls",emploi:"emploi/data"}),notes(){return this.notesRaw&&this.notesRaw.length?this.notesMapped(this.notesRaw):null},eleve(){if(this.current&&this.current.hasOwnProperty("eleve"))return this.current.eleve},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee},dark:{get(){return this.darkMode},set(a){this.toggleDarkMode()}}},methods:{...k({getConfig:"user/getConfig",getNotes:"notes/getData"}),notesMapped(a,e){for(var i=y(a,function(c){return parseInt(c.semestre.match(/\d+/)[0])}),s=Object.keys(i),r=s.length-1;r>=0;r--){i[s[r]]=y(i[s[r]],function(c){return c.unite_id});for(var t=i[s[r]],o=Object.keys(t),l=o.length-1;l>=0;l--)t[o[l]]=y(t[o[l]],function(c){return c.idmatiere});i[s[r]]=t}return i},sub(a){return this.$cleanHtml(a,{allowedTags:["b","i","em","strong","a"]})},getData(){this.getNotes({annee:this.annee.idannee,eleve:this.eleve.idpers,classe:this.annee.pivot.idclasse,type:1})},color(a){let e=this.notes[this.sem][a],i=Object.keys(e),s=null;for(var r=i.length-1;r>=0;r--)for(var t=e[i[r]].length-1;t>=0;t--)if(e[i[r]][t].iddiscipline){s=e[i[r]][t].iddiscipline;break}if(s){let o=I(l=>l.iddiscipline===parseInt(s),this.discs);if(o)return o.color}return"#e2e2e2"},discipline(a){},un(a,e){var i=a[e],s=i[Object.keys(i)[0]],s=s[0].unite.trim(),s=s.replace("معدل وحدة ",""),s=s.replace("Moyenne de ",""),s=s.replace("Moyenne d'","");return s.toUpperCase()},mn(a,e){var i=a[e],s=i[0].matiere.trim(),s=s.replace("معدل وحدة ",""),s=s.replace("Moyenne de ",""),s=s.replace("Moyenne d'","");return s.toUpperCase()},ca(a,e){var i=a[e];return i},cn(a,e,i){a[e]},total(a,e,i){if(a==="m"){var s=e[i],r=s.reduce(function(l,c){return l+Number(c.note)},0);return(r/s.length).toFixed(2)}else if(a==="u"){for(var t=Object.keys(e[i]),r=0,o=t.length-1;o>=0;o--)Object.keys(e[i][t[o]]),r+=Number(this.total("m",e[i],t[o]));return(r/t.length).toFixed(2)}},keys(a){return Object.keys(a?this.notes[this.sem][a]:this.notes[this.sem])}},mounted(){this.setTitle("Relevés de notes"),console.log("annee",this.annee),this.$nextTick(()=>{this.discs=V(D(P(this.emploi,"matiere.discipline"),a=>a.iddiscipline))}),this.getData()}},j={class:"q-pa-lg flex flex-center"},E={class:"row q-col-gutter-md"},S={class:"col-xs-12 col-md-12"},T={class:"objetInterfaceMobile_zonePrincipale"},q={class:"objetInterfaceMobile_identPage"},A={id:"",style:{}},F={class:"collection with-header bg-white"},Q={class:"collection-header with-action",style:{padding:"3px 12px"}},U={class:"left"},z={class:"right"},G={class:"collection-item with-action"},L={class:"left"},J={class:"AlignementHaut InlineBlock"},K={class:"right"},W={class:"collection-item",style:{"padding-left":"30px"}},X={class:"left"},Y={class:"AlignementHaut InlineBlock"},Z={class:"right"};function $(a,e,i,s,r,t){const o=C("ep-pagination");return d(),f(B,{padding:"",class:"page-content"},{default:g(()=>[n("div",j,[t.notes?(d(),f(o,{key:0,modelValue:r.sem,"onUpdate:modelValue":e[0]||(e[0]=l=>r.sem=l),max:2,"direction-links":"","boundary-links":!1,div:"",divClass:"full-width text-center text-white text-bold",dark:"",color:"white",class:"bg-primary full-width",style:{"border-radius":"10rem",height:"30px"}},{content:g(()=>[O(" Semestre "+u(r.sem),1)]),_:1},8,["modelValue"])):p("",!0)]),n("div",E,[n("div",S,[t.notes&&t.notes.hasOwnProperty(r.sem)?(d(),f(M,{key:0,style:{margin:"0 -8px 0"},flat:""},{default:g(()=>[n("div",T,[n("div",q,[n("div",A,[n("ul",F,[t.notes?(d(!0),m(h,{key:0},_(t.keys(),(l,c)=>(d(),m(h,{key:"ui"+c},[n("li",Q,[n("div",{style:N("padding: 10px 5px; border-left: 5px solid"+t.color(l))},[n("div",U,u(t.un(t.notes[r.sem],l)),1),n("div",z,u(t.total("u",t.notes[r.sem],l)),1),e[1]||(e[1]=n("div",{class:"clear"},null,-1))],4)]),t.notes?(d(!0),m(h,{key:0},_(t.keys(l),(v,ee)=>(d(),m(h,null,[n("li",G,[n("div",L,[n("div",J,u(t.mn(t.notes[r.sem][l],v))+" ",1)]),n("div",K,[n("div",null,u(t.total("m",t.notes[r.sem][l],v)),1)]),e[2]||(e[2]=n("div",{class:"clear"},null,-1)),e[3]||(e[3]=n("div",{class:"EspaceHaut"},[n("div",{class:"clear"})],-1))]),(d(!0),m(h,null,_(t.ca(t.notes[r.sem][l],v),x=>(d(),m("li",W,[n("div",X,[n("div",Y,"Controle N°"+u(x.numero)+" ",1)]),n("div",Z,[n("div",null,u(x.note),1)]),e[4]||(e[4]=n("div",{class:"clear"},null,-1)),e[5]||(e[5]=n("div",{class:"EspaceHaut"},[n("div",{class:"clear"})],-1))]))),256))],64))),256)):p("",!0)],64))),128)):p("",!0)])])])])]),_:1})):p("",!0)])])]),_:1})}const me=b(H,[["render",$]]);export{me as default};
