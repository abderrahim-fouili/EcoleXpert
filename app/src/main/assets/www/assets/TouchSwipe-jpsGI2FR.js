import{c7 as P,c8 as y,c9 as d,ca as C,F as D,cb as f,bz as w,bW as x,ce as q}from"./index-Bl2lQPd7.js";import{g as S,s as g}from"./touch-BjYP5sR0.js";import{c as L}from"./selection-DaBtDCZ0.js";function M(i){const o=[.06,6,50];return typeof i=="string"&&i.length&&i.split(":").forEach((a,u)=>{const v=parseFloat(a);v&&(o[u]=v)}),o}const Y=P({name:"touch-swipe",beforeMount(i,{value:o,arg:a,modifiers:u}){if(u.mouse!==!0&&d.has.touch!==!0)return;const v=u.mouseCapture===!0?"Capture":"",e={handler:o,sensitivity:M(a),direction:S(u),noop:D,mouseStart(t){g(t,e)&&q(t)&&(f(e,"temp",[[document,"mousemove","move",`notPassive${v}`],[document,"mouseup","end","notPassiveCapture"]]),e.start(t,!0))},touchStart(t){if(g(t,e)){const r=t.target;f(e,"temp",[[r,"touchmove","move","notPassiveCapture"],[r,"touchcancel","end","notPassiveCapture"],[r,"touchend","end","notPassiveCapture"]]),e.start(t)}},start(t,r){d.is.firefox===!0&&C(i,!0);const c=x(t);e.event={x:c.left,y:c.top,time:Date.now(),mouse:r===!0,dir:!1}},move(t){if(e.event===void 0)return;if(e.event.dir!==!1){w(t);return}const r=Date.now()-e.event.time;if(r===0)return;const c=x(t),p=c.left-e.event.x,s=Math.abs(p),l=c.top-e.event.y,n=Math.abs(l);if(e.event.mouse!==!0){if(s<e.sensitivity[1]&&n<e.sensitivity[1]){e.end(t);return}}else if(window.getSelection().toString()!==""){e.end(t);return}else if(s<e.sensitivity[2]&&n<e.sensitivity[2])return;const m=s/r,h=n/r;e.direction.vertical===!0&&s<n&&s<100&&h>e.sensitivity[0]&&(e.event.dir=l<0?"up":"down"),e.direction.horizontal===!0&&s>n&&n<100&&m>e.sensitivity[0]&&(e.event.dir=p<0?"left":"right"),e.direction.up===!0&&s<n&&l<0&&s<100&&h>e.sensitivity[0]&&(e.event.dir="up"),e.direction.down===!0&&s<n&&l>0&&s<100&&h>e.sensitivity[0]&&(e.event.dir="down"),e.direction.left===!0&&s>n&&p<0&&n<100&&m>e.sensitivity[0]&&(e.event.dir="left"),e.direction.right===!0&&s>n&&p>0&&n<100&&m>e.sensitivity[0]&&(e.event.dir="right"),e.event.dir!==!1?(w(t),e.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),L(),e.styleCleanup=_=>{e.styleCleanup=void 0,document.body.classList.remove("non-selectable");const b=()=>{document.body.classList.remove("no-pointer-events--children")};_===!0?setTimeout(b,50):b()}),e.handler({evt:t,touch:e.event.mouse!==!0,mouse:e.event.mouse,direction:e.event.dir,duration:r,distance:{x:s,y:n}})):e.end(t)},end(t){e.event!==void 0&&(y(e,"temp"),d.is.firefox===!0&&C(i,!1),e.styleCleanup?.(!0),t!==void 0&&e.event.dir!==!1&&w(t),e.event=void 0)}};if(i.__qtouchswipe=e,u.mouse===!0){const t=u.mouseCapture===!0||u.mousecapture===!0?"Capture":"";f(e,"main",[[i,"mousedown","mouseStart",`passive${t}`]])}d.has.touch===!0&&f(e,"main",[[i,"touchstart","touchStart",`passive${u.capture===!0?"Capture":""}`],[i,"touchmove","noop","notPassiveCapture"]])},updated(i,o){const a=i.__qtouchswipe;a!==void 0&&(o.oldValue!==o.value&&(typeof o.value!="function"&&a.end(),a.handler=o.value),a.direction=S(o.modifiers))},beforeUnmount(i){const o=i.__qtouchswipe;o!==void 0&&(y(o,"main"),y(o,"temp"),d.is.firefox===!0&&C(i,!1),o.styleCleanup?.(),delete i.__qtouchswipe)}});export{Y as T};
