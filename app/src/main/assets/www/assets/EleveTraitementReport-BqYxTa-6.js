import{q as c}from"./date-C1Mon-Jj.js";import{_ as y,B as f,a4 as r,S as i,a8 as e,R as m,ab as s,ad as A,a9 as v,aa as D}from"./index-Bl2lQPd7.js";import"./format-IcNrutKL.js";const b={class:"report-container eleve-traitement-report"},N={class:"invoice-header"},T={class:"logo-section"},O={class:"logo-placeholder"},Y=["src"],L={key:0,class:"partner-logo-section"},C=["src"],I={class:"report-main-title"},M={class:"report-meta"},S={key:0,class:"report-meta filter-summary"},k={key:1,class:"report-table-container"},q={class:"report-table"},F={key:2,class:"no-data"},R={__name:"EleveTraitementReport",props:{traitementsList:{type:Array,required:!0,default:()=>[]},schoolInfo:{type:Object,default:()=>({name:"Nom de l'École par Défaut",addressLine1:"Adresse par Défaut",city:"Ville par Défaut",contactEmail:"email@example.com",phone:"+000000000",logoUrl:"/placeholder-logo-default.png"})},partnerInfo:{type:Object,default:()=>({logoUrl:null})},filtersApplied:{type:Object,default:()=>({})},reportTitle:{type:String,default:"Liste des Protocoles de Traitement Médical"},studentOptionsForReport:{type:Array,default:()=>[]},academicYearOptionsForReport:{type:Array,default:()=>[]}},setup(a){const o=a,h=f(()=>c.formatDate(Date.now(),"DD/MM/YYYY HH:mm")),d=(t,l="DD/MM/YYYY")=>t?c.formatDate(t,l):"",u=t=>t===0?"Aiguë":t===1?"Chronique":"Inconnu",_=t=>t.pieces_jointes?.length>0?"Oui":"Non",g=t=>t?t.eleve_classes&&t.eleve_classes.length>0?t.eleve_classes.map(l=>l.classe_fr||"N/A").join(", "):t.classe_actuelle?.classe_fr||"N/A":"N/A",p=f(()=>{const t=[];if(o.filtersApplied.id_eleve){const l=o.studentOptionsForReport.find(n=>n.idpers===o.filtersApplied.id_eleve);t.push(`Élève: ${l?l.nom+" "+l.prenom:o.filtersApplied.id_eleve}`)}if(o.filtersApplied.idannee){const l=o.academicYearOptionsForReport.find(n=>n.idannee===o.filtersApplied.idannee);t.push(`Année: ${l?l.description:o.filtersApplied.idannee}`)}return o.filtersApplied.statut&&t.push(`Statut: ${o.filtersApplied.statut}`),o.filtersApplied.type_maladie!==null&&o.filtersApplied.type_maladie!==void 0&&t.push(`Type Maladie: ${u(o.filtersApplied.type_maladie)}`),o.filtersApplied.condition_medicale&&t.push(`Condition: ${o.filtersApplied.condition_medicale}`),t.length>0?t.join("; "):null});return(t,l)=>(i(),r("div",b,[e("header",N,[e("div",T,[e("div",O,[e("img",{src:a.schoolInfo.logoUrl||"/placeholder-logo-default.png",alt:"School Logo",style:{height:"60px"}},null,8,Y)]),l[0]||(l[0]=e("div",{class:"school-info"},null,-1))]),a.partnerInfo&&a.partnerInfo.logoUrl?(i(),r("div",L,[e("img",{src:a.partnerInfo.logoUrl,alt:"Partner Logo",class:"aefe-logo"},null,8,C),l[1]||(l[1]=e("div",{class:"etablissement-partenaire"},"Pôle Santé & Scolarité",-1))])):m("",!0)]),e("h1",I,s(a.reportTitle),1),e("p",M,"Date d'impression: "+s(h.value),1),p.value?(i(),r("div",S,[e("p",null,[l[2]||(l[2]=e("strong",null,"Filtres appliqués:",-1)),A(" "+s(p.value),1)])])):m("",!0),a.traitementsList&&a.traitementsList.length>0?(i(),r("div",k,[e("table",q,[l[3]||(l[3]=e("thead",null,[e("tr",null,[e("th",null,"Élève"),e("th",null,"Classe"),e("th",null,"Condition Médicale"),e("th",null,"Traitement/Procédure"),e("th",null,"Type Maladie"),e("th",null,"Date Début"),e("th",null,"Date Fin"),e("th",null,"Statut"),e("th",null,"Ordonance Communiqué")])],-1)),e("tbody",null,[(i(!0),r(v,null,D(a.traitementsList,n=>(i(),r("tr",{key:n.id_traitement},[e("td",null,s(n.eleve?.nom)+" "+s(n.eleve?.prenom),1),e("td",null,s(g(n.eleve)),1),e("td",null,s(n.condition_medicale||"N/A"),1),e("td",null,s(n.nom_medicament_procedure||"N/A"),1),e("td",null,s(u(n.type_maladie)),1),e("td",null,s(d(n.date_debut)),1),e("td",null,s(n.date_fin?d(n.date_fin):"En cours"),1),e("td",null,s(n.statut||"N/A"),1),e("td",null,s(_(n)),1)]))),128))])])])):(i(),r("div",F," Aucun protocole de traitement à afficher pour les critères sélectionnés. "))]))}},U=y(R,[["__scopeId","data-v-aa0fd8d2"]]);export{U as default};
