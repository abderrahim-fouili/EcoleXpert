import{Q as h}from"./QImg-BMvxJu3S.js";import{Q as _}from"./QBadge-Bjfo5tRO.js";import{_ as b,aY as v,b8 as k,b9 as x,b2 as Q,ba as y,as as w,at as L,Q as d,S as n,a6 as e,a5 as a,a4 as c,a9 as f,aa as p,av as C,a7 as I,ad as i,ab as o,R as M,a8 as A,ah as B,ay as N,aw as q,aE as D,be as U,aB as O}from"./index-Bl2lQPd7.js";import{Q as R,a as m}from"./QItem-De3v03wU.js";import{Q as l}from"./QItemLabel-BkJiB6aE.js";import{Q as T}from"./QList-CMzNTEGD.js";import{q as V}from"./date-C1Mon-Jj.js";import"./format-IcNrutKL.js";const j={computed:{...L({user:"user/user",config:"user/config",links:"user/nav",current:"user/current",messagesList:"message/outbox",darkMode:"darkMode"}),messages(){return this.messagesList&&this.messagesList.data?this.messagesList.data:[]},eleve(){if(this.current&&this.current.hasOwnProperty("eleve"))return this.current.eleve},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee},dark:{get(){return this.darkMode},set(r){this.toggleDarkMode()}}},methods:{...w({getConfig:"user/getConfig",getMessages:"message/getOutbox"}),LetterAvatar:y,toNow:Q,fileIcon:x,openURL:k,pjUrl:v,personAvatar(r){return O(r)},sub(r){return U(this.$cleanHtml(r,{allowedTags:["b","i","em","strong","a"]}))},date(r){return V.formatDate(r*1e3)}},mounted(){this.getMessages({page:1})}},P=["onClick"];function S(r,E,H,z,F,s){return n(),d(D,{style:{margin:"0 -8px"},flat:""},{default:e(()=>[a(T,null,{default:e(()=>[(n(!0),c(f,null,p(s.messages,(t,g)=>C((n(),d(R,{key:g,clickable:"",to:"/messages/view/"+t.id},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(I,null,{default:e(()=>[a(h,{src:s.personAvatar(t.sender),"placeholder-src":s.LetterAvatar(t.sender.nom)},null,8,["src","placeholder-src"]),a(_,{floating:"",transparent:"",color:"secondary"},{default:e(()=>[i(o(t.type_sender),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(m,null,{default:e(()=>[a(l,{lines:"1"},{default:e(()=>[A("span",null,o(t.sender.nom)+" "+o(t.sender.prenom),1)]),_:2},1024),a(l,{lines:"1"},{default:e(()=>[i(o(t.objet),1)]),_:2},1024),a(l,{caption:"",lines:"1"},{default:e(()=>[i(o(s.sub(t.message)),1)]),_:2},1024),t.fichiers.length?(n(),d(l,{key:0,lines:"1"},{default:e(()=>[(n(!0),c(f,null,p(t.fichiers,(u,G)=>(n(),c("div",{outline:"",color:"grey-9",onClick:B(Y=>s.openURL(s.pjUrl(u)),["prevent"]),class:"ellipsis rounded-borders q-mr-xs q-pa-xs",style:{"max-width":"40%",display:"inline-block",border:"1px solid var(--q-primary)"}},[a(N,{name:"img:"+s.fileIcon(u.fichier),size:"14px"},null,8,["name"]),i(" "+o(u.fichier),1)],8,P))),256))]),_:2},1024)):M("",!0)]),_:2},1024),a(m,{side:"",top:""},{default:e(()=>[a(l,{caption:""},{default:e(()=>[i(o(s.toNow(t.created_at*1e3)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"])),[[q]])),128))]),_:1})]),_:1})}const te=b(j,[["render",S]]);export{te as default};
