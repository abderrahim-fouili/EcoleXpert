import{_ as M,as as R,at as D,ag as g,Q as f,S as n,a6 as r,a8 as s,a4 as o,R as c,a5 as i,aE as h,aF as m,ad as d,a9 as u,aa as _,ab as p,aC as Q,aB as B,aQ as T}from"./index-Bl2lQPd7.js";import{Q as I}from"./QImg-BMvxJu3S.js";import{A as S}from"./Appel-CJj4wrOT.js";import{f as L}from"./index-Dx01H97j.js";import{f as N}from"./index-C9ZTL5MN.js";import{a as k}from"./index-B29DxFTF.js";import"./QItem-De3v03wU.js";import"./QList-CMzNTEGD.js";import"./index-CbPSoDvq.js";import"./index-BXMW6yyY.js";const P={data(){return{date:new Date}},components:{Appel:S},computed:{...D({user:"user/user",config:"user/config",links:"user/nav",rappel:"user/rappel",current:"user/current",actualitesList:"actualite/data",emploi:"profEmploi/data",appels:"profAbsences/appel",darkMode:"darkMode"}),slides(){let t=[];return this.actualitesList&&this.actualitesList.data?(t=this.actualitesList.data.slice(0,7),t.map(e=>({title:e.objet,img:T(e.contenu),contenu:this.sub(e.contenu),id:e.id}))):[]},classe(){if(this.current&&this.current.hasOwnProperty("classe"))return this.current.classe},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee},dark:{get(){return this.darkMode},set(t){this.toggleDarkMode()}}},watch:{classe(){this.loadAppel(),this.getRappel()}},methods:{...R({getConfig:"user/getConfig",getActualites:"actualite/getData",getAppel:"profAbsences/getAppel",getRappel:"user/rappel",setRefresh:"setRefresh"}),format:N,fromUnixTime:L,avant(){this.date=k(this.date,-1)},apres(){this.date=k(this.date,1)},personAvatar(t){return B(t)},sub(t){return this.$cleanHtml(t,{allowedTags:["b","i","em","strong","a"]})},loadAppel(){this.annee.courant===1&&this.getAppel({annee:this.annee.idannee,classe:this.classe.idclasse,nonfait:!0})}},mounted(){this.showFooter(!1),this.slides.length||this.getActualites({page:1}),this.loadAppel(),this.getRappel(),this.setRefresh(t=>{this.loadAppel(),this.getRappel(),t()}),this.setTitle("Page d'accueil")}},V={key:0,class:"col-xs-12",style:{padding:"0",margin:"36px -8px 0"}},j={class:"text-weight-medium"},q={class:"text-weight-medium"},E={key:0},F={key:1,class:"col-xs-12"},O={class:"full-width text-center"},U={class:"col-xs-12",style:{padding:"0",margin:"0 -8px"}},z={class:"",style:{padding:"16px 8px 14px"}},G={class:"objetInterfaceMobile_zoneSelection"},H={class:"ObjetCelluleDate input-wrapper design-mobile selecteur-mobile"},J={style:{flex:"1 1 auto"}},K={class:"input-wrapper"},W={class:"ocb_cont as-input"},X={class:"ie-ellipsis text-center"},Y={class:"col-xs-12"};function Z(t,e,$,ee,x,l){const v=g("slide"),w=g("carousel-3d"),A=g("el-calendar"),C=g("appel");return n(),f(Q,{padding:"",class:"page-content"},{default:r(()=>[s("div",null,[t.rappel?(n(),o("div",V,[i(h,{class:"q-mb-md widget rappel-mnemonique bg-blue-50"},{default:r(()=>[i(m,{style:{"text-align":"center","font-weight":"bold"}},{default:r(()=>e[2]||(e[2]=[d(" Rappel mnémonique ")])),_:1}),i(m,{class:"container"},{default:r(()=>[t.rappel.devoirs&&t.rappel.devoirs.length?(n(!0),o(u,{key:0},_(t.rappel.devoirs,(a,y)=>(n(),o(u,null,[e[3]||(e[3]=d(" Devoir ")),s("span",j,p(a.objet),1),e[4]||(e[4]=d(" à rendre le ")),s("span",q,p(l.format(l.fromUnixTime(a.rendre_le),"dd/MM")),1),e[5]||(e[5]=d(" : ")),(n(!0),o(u,null,_(a.classes,(b,te)=>(n(),o(u,null,[d(p(b.classes.classe_fr)+" ",1),a.classes.length>1?(n(),o("span",E,",")):c("",!0)],64))),256)),e[6]||(e[6]=s("br",null,null,-1))],64))),256)):c("",!0)]),_:1})]),_:1})])):c("",!0),l.slides.length?(n(),o("div",F,[i(m,{style:{"text-align":"center","font-weight":"bold"}},{default:r(()=>e[7]||(e[7]=[d("Actualités")])),_:1}),i(w,{width:300,border:0,autoplay:!0,autoplayTimeout:1e4,style:{"margin-top":"0px"},count:l.slides.length},{default:r(()=>[(n(!0),o(u,null,_(l.slides,(a,y)=>(n(),f(v,{index:y,style:{width:"100%"}},{default:r(()=>[i(h,{flat:"",bordered:"",onClick:b=>t.go("/prof/actualites/"+a.id)},{default:r(()=>[a.img?(n(),f(I,{key:0,src:a.img,style:{"max-height":"260px"},class:"bg-secondary"},{default:r(()=>[s("div",O,p(a.title),1)]),_:2},1032,["src"])):(n(),o(u,{key:1},[i(m,{class:"text-white text-bold text-center bg-secondary"},{default:r(()=>[d(p(a.title),1)]),_:2},1024),c("",!0)],64))]),_:2},1032,["onClick"])]),_:2},1032,["index"]))),256))]),_:1},8,["count"])])):c("",!0),s("div",U,[i(h,{class:"q-mb-md"},{default:r(()=>[s("div",z,[s("div",G,[s("div",H,[s("i",{class:"icon_angle_left btnImage text-white",style:{flex:"none"},onClick:e[0]||(e[0]=(...a)=>l.avant&&l.avant(...a))}),s("div",J,[s("div",K,[s("div",W,[s("div",X,p(l.format(x.date,"E dd MMM")),1)])])]),s("i",{r:"",class:"icon_angle_right btnImage text-white",style:{flex:"none"},onClick:e[1]||(e[1]=(...a)=>l.apres&&l.apres(...a))})])])]),i(A,{events:t.emploi,date:x.date,annee:l.annee,classe:l.classe,type:"prof"},null,8,["events","date","annee","classe"])]),_:1})]),s("div",Y,[t.appels?(n(),f(C,{key:0,appels:t.appels,annee:l.annee},{default:r(()=>[i(m,{style:{"text-align":"center","font-weight":"bold"}},{default:r(()=>[d("Appels non faits ("+p(t.appels.length)+")",1)]),_:1})]),_:1},8,["appels","annee"])):c("",!0)])])]),_:1})}const ue=M(P,[["render",Z]]);export{ue as default};
