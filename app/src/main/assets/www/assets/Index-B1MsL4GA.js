import{Q as g}from"./QImg-BMvxJu3S.js";import{Q as l}from"./QItemLabel-BkJiB6aE.js";import{Q as h,a as d}from"./QItem-De3v03wU.js";import{_ as p,aQ as _,as as k,at as Q,Q as c,S as i,a6 as t,a8 as o,a5 as s,a4 as x,a9 as v,aa as b,av as y,aE as L,R as m,af as C,ad as n,ab as u,ay as I,aw as w,aC as D,aB as M}from"./index-Bl2lQPd7.js";import{Q as A}from"./QBadge-Bjfo5tRO.js";import{Q as B}from"./QList-CMzNTEGD.js";import{q as R}from"./date-C1Mon-Jj.js";import"./format-IcNrutKL.js";const T={computed:{...Q({user:"user/user",config:"user/config",links:"user/nav",current:"user/current",actualitesList:"actualite/data",darkMode:"darkMode"}),actualites(){return console.log(this.actualitesList),this.actualitesList&&this.actualitesList.data?this.actualitesList.data:[]},eleve(){if(this.current&&this.current.hasOwnProperty("eleve"))return this.current.eleve},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee},dark:{get(){return this.darkMode},set(e){this.toggleDarkMode()}}},methods:{...k({getConfig:"user/getConfig",getActualites:"actualite/getData",setRefresh:"setRefresh"}),extractImg:_,personAvatar(e){return M(e)},sub(e){return this.$cleanHtml(e,{allowedTags:["b","i","em","strong","a"]}).replace(/<img[^>]*>/g,"")},date(e){return R.formatDate(e*1e3,"YYYY-MM-DD")}},mounted(){this.getActualites({page:1}),this.setRefresh(e=>{this.getActualites({page:1}),e()}),this.setTitle("ActualitÃ©s")}},q={class:"row q-col-gutter-md"},H={class:"col-xs-12 col-md-12"},N={style:{margin:"26px -7px 0"},flat:""};function P(e,V,Y,S,z,r){return i(),c(D,{padding:"",class:"page-content"},{default:t(()=>[o("div",q,[o("div",H,[o("div",N,[s(B,{class:"row"},{default:t(()=>[(i(!0),x(v,null,b(r.actualites,(a,f)=>y((i(),c(L,{key:f,clickable:"",onClick:E=>e.go("/prof/actualites/"+a.id),class:"col-xs-12 col-md-4 col-lg-3",square:"",flat:"",bordered:""},{default:t(()=>[r.extractImg(a.contenu)?(i(),c(g,{key:0,src:r.extractImg(a.contenu)},null,8,["src"])):m("",!0),s(h,{clickable:""},{default:t(()=>[s(d,null,{default:t(()=>[s(l,{class:C({"text-bold":!a.etat.length})},{default:t(()=>[n(u(a.objet),1)]),_:2},1032,["class"]),s(l,{caption:"",lines:"2",innerHTML:r.sub(a.contenu)},null,8,["innerHTML"])]),_:2},1024),s(d,{side:"",top:""},{default:t(()=>[s(l,{caption:""},{default:t(()=>[n(u(r.date(a.publie_le)),1)]),_:2},1024),a.fichiers.length?(i(),c(l,{key:0,caption:""},{default:t(()=>[s(A,{color:"grey-6","text-color":"grey-1"},{default:t(()=>[n(u(a.fichiers.length)+" ",1),s(I,{name:"attach_file",size:"14px"})]),_:2},1024)]),_:2},1024)):m("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[w]])),128))]),_:1})])])])]),_:1})}const W=p(T,[["render",P]]);export{W as default};
