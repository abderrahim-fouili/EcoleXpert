import{Q as y}from"./QToolbarTitle-C8APieXG.js";import{_ as B,aq as F,ar as V,as as z,at as L,ag as k,Q as c,R as h,S as o,a6 as t,a5 as e,au as I,a3 as m,ad as p,ab as f,a8 as i,a4 as _,a9 as g,aa as x,av as C,aw as D,ax as O,a7 as N,ay as b,az as R,af as T,aA as U,aB as A}from"./index-Bl2lQPd7.js";import{Q as v}from"./QItemLabel-BkJiB6aE.js";import{Q as w,a as u}from"./QItem-De3v03wU.js";import{Q}from"./QList-CMzNTEGD.js";import{Q as W}from"./QExpansionItem-EMhshZ_3.js";import{Q as G}from"./QScrollArea-DbARZhEV.js";import{Q as H}from"./QMenu-BNr9Tzvf.js";import{_ as $,Q as j}from"./SchoolSwitcher-D06IRcd0.js";import{Q as J}from"./QToolbar-DR-_wX4W.js";import{Q as K}from"./QFooter-BqOQs2Wv.js";import{E as X}from"./Header-iKAj_IF4.js";import"./QSlideTransition-CrdUnXBf.js";import"./TouchPan-jBhMORlX.js";import"./touch-BjYP5sR0.js";import"./selection-DaBtDCZ0.js";import"./format-IcNrutKL.js";import"./position-engine-o8Q2RudZ.js";import"./composables-CAkrP3jA.js";import"./QBanner-xBGiroIy.js";import"./QPageSticky-adQ0nSeI.js";import"./ClosePopup-BY_YGFBZ.js";import"./QHeader-B4MlZ-LM.js";import"./QSpace-CKKoNTi_.js";const Y={name:"MyLayout",data(){return{drawerOpen:this.$q.platform.is.desktop}},components:{EpHeader:X,SchoolSwitcher:$},computed:{...L({user:"user/user",config:"user/config",darkMode:"darkMode",current:"user/current",title:"title",links:"user/nav"}),eleve(){if(this.current&&this.current.hasOwnProperty("eleve"))return this.current.eleve},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee}},methods:{...z({logout:"user/logout",toggleDarkMode:"toggleDarkMode",toggleEleve:"user/setEleve",togglAnnee:"user/setAnnee"}),openURL:V,isDev:F,setEleve(r){this.toggleEleve(r),this.go("/parent")},setAnnee(r){this.togglAnnee(r),this.go("/parent")},avatar(){return A(this.user)},personAvatar(r){return A(r)},deconnexion(){this.logout(),this.$router.push("/login")},minimize(){},maximize(){},fullscreen(){this.$q.electron.remote.BrowserWindow.getFocusedWindow().setFullScreen(this.isFullscreen=!this.isFullscreen)},close(){},toStore(){this.$router.push("/store")}},mounted(){this.canAccess(this.config)}},Z={class:"col-xs-10",style:{position:"relative"}},ee={class:"absolute-top text-white bg1",style:{height:"150px",overflow:"hidden"}},te={class:"absolute-bottom text-center"},re=["src"],le={class:"text-weight-bold text-white text-shadow q-mb-xl"},ae={class:"col-xs-2 bg-white text-dark q-pt-lg q-pb-lg",style:{position:"relative"}};function oe(r,a,se,ne,n,s){const S=k("ep-header"),q=k("school-switcher"),E=k("router-view");return r.user?(o(),c(U,{key:0,view:"hhr lpR fFr",class:T({page:!0})},{default:t(()=>[e(S,null,I({toolbar:t(()=>[e(y),e(m,{onClick:a[0]||(a[0]=l=>r.go("/")),flat:"",round:"",dense:"",icon:"icon_home",class:"q-mr-xs"}),e(m,{flat:"",round:"",dense:"",icon:"icon_menu_burger",onClick:a[1]||(a[1]=l=>n.drawerOpen=!n.drawerOpen),"aria-label":"Menu"})]),_:2},[r.title?{name:"title",fn:t(()=>[p(f(r.title),1)]),key:"0"}:void 0]),1024),e(j,{modelValue:n.drawerOpen,"onUpdate:modelValue":a[3]||(a[3]=l=>n.drawerOpen=l),side:"right",dark:"",elevated:"",class:"bg-secondary row"},{default:t(()=>[i("div",Z,[e(G,{style:{height:"calc(100% - 150px)","margin-top":"150px"}},{default:t(()=>[e(Q,{bordered:""},{default:t(()=>[(o(!0),_(g,null,x(r.links,(l,M)=>(o(),_(g,null,[l.haschildren&&l.items.length?(o(),c(W,{key:0,label:l.label},{default:t(()=>[e(Q,null,{default:t(()=>[(o(!0),_(g,null,x(l.items,(d,P)=>(o(),_(g,null,[s.isDev()||!d.disable?C((o(),c(w,{clickable:"",to:d.to,key:P,disable:s.isDev()?!1:d.disable,exact:!d.hasOwnProperty("haschildren")},{default:t(()=>[e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[p(f(d.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to","disable","exact"])),[[D]]):h("",!0)],64))),256))]),_:2},1024)]),_:2},1032,["label"])):s.isDev()||!r.sm.disable?C((o(),c(w,{clickable:"",to:l.to,key:M,disable:s.isDev()?!1:l.disable,exact:!l.hasOwnProperty("haschildren")},{default:t(()=>[e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[p(f(l.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to","disable","exact"])),[[D]]):h("",!0),l.disable?h("",!0):(o(),c(O,{key:2}))],64))),256))]),_:1})]),_:1}),i("div",ee,[i("div",te,[e(N,{size:"56px",class:"q-mb-sm"},{default:t(()=>[i("img",{src:s.avatar(r.user)},null,8,re),e(H,null,{default:t(()=>[e(Q,{link:""},{default:t(()=>[e(w,{to:"/personnel",clickable:""},{default:t(()=>[e(u,{side:""},{default:t(()=>[e(b,{name:"account_circle"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>a[5]||(a[5]=[p(" Profil ")])),_:1})]),_:1})]),_:1}),e(O),e(w,{onClick:s.deconnexion,clickable:""},{default:t(()=>[e(u,{side:""},{default:t(()=>[e(b,{name:"power_settings_new"})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>a[6]||(a[6]=[p(" DÃ©connexion ")])),_:1})]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),i("div",le,f(r.user.nom)+" "+f(r.user.prenom),1)])])]),i("div",ae,[e(m,{class:"full-width",flat:"",onClick:a[2]||(a[2]=l=>n.drawerOpen=!n.drawerOpen),"aria-label":"Menu"},{default:t(()=>[e(b,{name:"icon_menu_burger"})]),_:1}),e(q),e(m,{onClick:s.deconnexion,color:"red",flat:"",size:"lg",class:"full-width absolute-bottom"},{default:t(()=>[e(b,{name:"power_settings_new"})]),_:1},8,["onClick"])])]),_:1},8,["modelValue"]),e(R,null,{default:t(()=>[e(E)]),_:1}),e(K,{class:"bg-secondary"},{default:t(()=>[e(J,null,{default:t(()=>[e(y,null,{default:t(()=>[e(m,{icon:"icon_retour_mobile",flat:"",onClick:a[4]||(a[4]=l=>r.$router.go(-1))})]),_:1})]),_:1})]),_:1})]),_:1})):h("",!0)}const Me=B(Y,[["render",oe]]);export{Me as default};
