import{_ as h,as as b,at as y,a4 as c,S as n,a8 as v,a5 as r,a6 as t,a9 as m,aa as Q,av as k,Q as u,R as p,a7 as x,ay as j,ad as l,ab as o,aw as C,aE as L,d3 as R,b3 as w}from"./index-Bl2lQPd7.js";import{Q as D,a as d}from"./QItem-De3v03wU.js";import{Q as f}from"./QItemLabel-BkJiB6aE.js";import{Q as q}from"./QList-CMzNTEGD.js";import{f as M}from"./index-C9ZTL5MN.js";import{q as _}from"./format-IcNrutKL.js";import"./index-BXMW6yyY.js";import"./index-CbPSoDvq.js";const B={emits:["abs:justifier"],computed:{...y({user:"user/user",config:"user/config",current:"user/current",retardsList:"absence/retards",form:"absence/form"}),retards(){return this.retardsList&&this.retardsList.data?this.retardsList.data:[]},eleve(){if(this.current&&this.current.hasOwnProperty("eleve"))return this.current.eleve},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee}},methods:{...b({getConfig:"user/getConfig",getRetards:"absence/getRetards"}),toDate(e){return _.capitalize(M(w(e),"E dd MMM yyyy"))},formatHour(e){let a=_.pad(e,4);return a=a.substring(0,2)+"h"+a.substring(2,4),a},sub(e){return this.$cleanHtml(e,{allowedTags:["b","i","em","strong","a"]})},timeManque(e){return R(0,e.duree_absence*60*1e3)},justifier(e){e.justifier||this.$emit("abs:justifier",{abs:e,title:"Justifier"})}},mounted(){this.setTitle("Retards"),this.getRetards({page:1,filter:{eleve_id:this.eleve.idpers,type:0,classe:this.annee.pivot.idclasse}})}};function I(e,a,N,S,V,i){return n(),c(m,null,[a[1]||(a[1]=v("div",{class:"q-pa-lg flex flex-center"},null,-1)),r(L,{style:{margin:"0 -8px"},flat:""},{default:t(()=>[r(q,null,{default:t(()=>[(n(!0),c(m,null,Q(i.retards,(s,g)=>k((n(),u(D,{key:g,clickable:"",onClick:E=>i.justifier(s)},{default:t(()=>[r(d,{avatar:""},{default:t(()=>[r(x,null,{default:t(()=>[s.justifier?p("",!0):(n(),u(j,{key:0,name:"icon_exclamation",color:"red"}))]),_:2},1024)]),_:2},1024),r(d,null,{default:t(()=>[r(f,{lines:"1",class:"abs-title"},{default:t(()=>[l(o(i.toDate(s.date_absence))+" à "+o(i.formatHour(s.debut)),1)]),_:2},1024),r(f,{caption:"",lines:"1"},{default:t(()=>[l(o(i.timeManque(s)),1)]),_:2},1024)]),_:2},1024),s.justifier?p("",!0):(n(),u(d,{key:0,side:"",top:""},{default:t(()=>[r(f,{caption:""},{default:t(()=>a[0]||(a[0]=[l(" à justifier ")])),_:1})]),_:1}))]),_:2},1032,["onClick"])),[[C]])),128))]),_:1})]),_:1})],64)}const G=h(B,[["render",I]]);export{G as default};
