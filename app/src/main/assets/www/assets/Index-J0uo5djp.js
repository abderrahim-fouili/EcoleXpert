import{A as m,aP as I,B as o,ag as N,a4 as w,S as u,a5 as e,a6 as a,a8 as Q,Q as g,R as h,ad as p,ab as d,aE as k,ax as L,a9 as b,aa as z,ac as C,aC as E,aF as V,aS as v,av as F,a3 as O,bd as R,aD as U}from"./index-Bl2lQPd7.js";import{Q as S}from"./QItemLabel-BkJiB6aE.js";import{Q as A,a as T}from"./QItem-De3v03wU.js";import{Q as j}from"./QList-CMzNTEGD.js";import{Q as G}from"./QSpace-CKKoNTi_.js";import{C as H}from"./ClosePopup-BY_YGFBZ.js";const J={class:"q-pa-lg flex flex-center"},K={class:"flex flex-center",style:{"max-width":"85%"}},te={__name:"Index",setup(M){let n=m(!1),c=m(null);const i=I();o(()=>i.state.user.profile),o(()=>i.state.user.config);const r=o(()=>i.state.user.defaults),B=o(()=>{if(r.value&&r.value.hasOwnProperty("eleve"))return r.value.eleve});o(()=>{if(r.value&&r.value.hasOwnProperty("annee"))return r.value.annee});const t=o(()=>i.state.infraction.data),_=m({page:1,filter:{eleve:B.value.idpers}});function x(){t.value&&t.value.current_page&&(_.page=t.value.current_page),i.dispatch("infraction/getData",_.value)}function D(s){c=s,n.value=!0}function y(s){if(s.grave===1)return"var(--q-positive)";if(s.grave===2)return"var(--q-warning)";if(s.grave===3)return"var(--q-negative)"}return x(),(s,f)=>{const P=N("ep-pagination");return u(),w(b,null,[e(E,{padding:"",class:"page-content"},{default:a(()=>[Q("div",J,[t.value?(u(),g(P,{key:0,modelValue:t.value.current_page,"onUpdate:modelValue":[f[0]||(f[0]=l=>t.value.current_page=l),x],max:t.value.last_page,"direction-links":"","boundary-links":!1,div:"",divClass:"full-width text-center text-white text-bold",dark:"",color:"white",class:"bg-primary full-width",style:{"border-radius":"10rem",height:"30px"}},{content:a(()=>[p(" Page "+d(t.value.current_page),1)]),_:1},8,["modelValue","max"])):h("",!0)]),t.value?(u(),g(k,{key:0,style:{margin:"0 -8px"},flat:""},{default:a(()=>[e(j,null,{default:a(()=>[e(L),(u(!0),w(b,null,z(t.value.data,(l,q)=>(u(),g(A,{key:q,clickable:"",style:C("border-left: 5px solid "+y(l)),onClick:W=>D(l)},{default:a(()=>[e(T,null,{default:a(()=>[e(S,{style:{"font-weight":"600"}},{default:a(()=>[p(d(l.infraction.description),1)]),_:2},1024),e(S,{lines:1},{default:a(()=>[p(d(l.observation),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style","onClick"]))),128))]),_:1})]),_:1})):h("",!0)]),_:1}),e(U,{modelValue:v(n),"onUpdate:modelValue":f[1]||(f[1]=l=>R(n)?n.value=l:n=l),position:"left",maximized:""},{default:a(()=>[e(k,null,{default:a(()=>[e(V,{class:"row text-white",style:C("font-weight:600;background-color: "+y(v(c)))},{default:a(()=>[Q("div",K,d(v(c).infraction.description),1),e(G),F(e(O,{icon:"close",flat:"",round:"",dense:""},null,512),[[H]])]),_:1},8,["style"]),e(V,null,{default:a(()=>[p(d(v(c).observation),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{te as default};
