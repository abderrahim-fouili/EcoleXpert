import{_ as h,as as _,at as g,a4 as f,S as r,a8 as y,a5 as a,a6 as e,a9 as m,aa as v,av as Q,Q as c,R as d,a7 as k,ay as x,ad as l,ab as p,aw as j,aE as A,d3 as C,b3 as L}from"./index-Bl2lQPd7.js";import{Q as q,a as u}from"./QItem-De3v03wU.js";import{Q as o}from"./QItemLabel-BkJiB6aE.js";import{Q as w}from"./QList-CMzNTEGD.js";import{f as D}from"./index-C9ZTL5MN.js";import{q as M}from"./format-IcNrutKL.js";import"./index-BXMW6yyY.js";import"./index-CbPSoDvq.js";const B={computed:{...g({user:"user/user",config:"user/config",current:"user/current",absencesList:"absence/absences",form:"absence/form"}),absences(){return this.absencesList&&this.absencesList.data?this.absencesList.data:[]},eleve(){if(this.current&&this.current.hasOwnProperty("eleve"))return this.current.eleve},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee}},methods:{..._({getConfig:"user/getConfig",getAbsences:"absence/getAbsences"}),toDate(t){return M.capitalize(D(L(t),"E dd MMM yyyy"))},sub(t){return this.$cleanHtml(t,{allowedTags:["b","i","em","strong","a"]})},timeManque(t){return C(0,t.duree_absence*60*1e3)},justifier(t){t.justifier||this.$emit("abs:justifier",{abs:t,title:"Justifier"})}},mounted(){this.setTitle("Absences"),this.absences.length||this.getAbsences({page:1,filter:{eleve_id:this.eleve.idpers,type:1,classe:this.annee.pivot.idclasse}})}};function I(t,i,N,S,V,n){return r(),f(m,null,[i[1]||(i[1]=y("div",{class:"q-pa-lg flex flex-center"},null,-1)),a(A,{style:{margin:"0 -8px"},flat:""},{default:e(()=>[a(w,null,{default:e(()=>[(r(!0),f(m,null,v(n.absences,(s,b)=>Q((r(),c(q,{key:b,clickable:"",onClick:E=>n.justifier(s)},{default:e(()=>[a(u,{avatar:""},{default:e(()=>[a(k,null,{default:e(()=>[s.justifier?d("",!0):(r(),c(x,{key:0,name:"icon_exclamation",color:"red"}))]),_:2},1024)]),_:2},1024),a(u,null,{default:e(()=>[a(o,{lines:"1",class:"abs-title"},{default:e(()=>[l(p(n.toDate(s.date_absence)),1)]),_:2},1024),a(o,{caption:"",lines:"1"},{default:e(()=>[l(p(n.timeManque(s))+" de cours manquées ",1)]),_:2},1024)]),_:2},1024),s.justifier?d("",!0):(r(),c(u,{key:0,side:"",top:""},{default:e(()=>[a(o,{caption:""},{default:e(()=>i[0]||(i[0]=[l(" à justifier ")])),_:1})]),_:1}))]),_:2},1032,["onClick"])),[[j]])),128))]),_:1})]),_:1})],64)}const H=h(B,[["render",I]]);export{H as default};
