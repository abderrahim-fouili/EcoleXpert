import"./QParallax-fj04-fjI.js";import{_ as A,as as C,at as D,ag as u,Q as l,S as n,a6 as s,a8 as a,a4 as p,R as h,a5 as r,aE as m,aF as d,ab as v,ad as c,a9 as g,aa as Q,aC as N,aB as V,aQ as B}from"./index-Bl2lQPd7.js";import{Q as S}from"./QImg-BMvxJu3S.js";import{D as M}from"./Devoir-BVG5z-GF.js";import{f as P}from"./index-C9ZTL5MN.js";import{a as f}from"./index-B29DxFTF.js";import"./QItemLabel-BkJiB6aE.js";import"./groupBy-BgHPVcz-.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./_curry1-CPMemvwC.js";import"./_xfBase-ZXVHuZFu.js";import"./_reduce-BZMr9wpn.js";import"./_isArrayLike-B3kKjEvQ.js";import"./index-Dx01H97j.js";import"./index-CbPSoDvq.js";import"./index-BXMW6yyY.js";const I={data(){return{date:new Date}},components:{Devoir:M},watch:{annee(){this.getDevoirsAvenir({page:1,filter:{annee:this.annee.idannee,classe:this.annee.pivot.idclasse}})}},computed:{...D({user:"user/user",config:"user/config",links:"user/nav",current:"user/current",actualitesList:"actualite/data",devoirsAvenir:"devoirs/devoirsAvenir",emploi:"emploi/data",darkMode:"darkMode"}),slides(){let e=[];return this.actualitesList&&this.actualitesList.data?(e=this.actualitesList.data.slice(0,7),e.map(t=>({title:t.objet,img:B(t.contenu),contenu:this.sub(t.contenu),id:t.id}))):[]},eleve(){if(this.current&&this.current.hasOwnProperty("eleve"))return this.current.eleve},annee(){if(this.current&&this.current.hasOwnProperty("annee"))return this.current.annee},dark:{get(){return this.darkMode},set(e){this.toggleDarkMode()}}},methods:{...C({getConfig:"user/getConfig",getActualites:"actualite/getData",getDevoirs:"devoirs/getDevoirs",getDevoirsAvenir:"devoirs/getDevoirsAvenir"}),format:P,avant(){this.date=f(this.date,-1)},apres(){this.date=f(this.date,1)},personAvatar(e){return V(e)},sub(e){return this.$cleanHtml(e,{allowedTags:["b","i","em","strong","a"]})}},mounted(){this.showFooter(!1),this.slides.length||this.getActualites({page:1}),this.setTitle("Page d'accueil"),this.$nextTick(()=>{this.getDevoirsAvenir({page:1,filter:{annee:this.annee.idannee,classe:this.annee.pivot.idclasse}})})}},T={class:""};const j={key:1,class:"col-xs-12"},L={class:"full-width text-center"},E={key:2,class:"col-xs-12",style:{padding:"0",margin:"0 -8px"}},z={class:"col-xs-12",style:{padding:"0",margin:"0 -8px"}},F={class:"",style:{padding:"16px 8px 14px"}},O={class:"objetInterfaceMobile_zoneSelection"},q={class:"ObjetCelluleDate input-wrapper design-mobile selecteur-mobile"},G={style:{flex:"1 1 auto"}},H={class:"input-wrapper"},R={class:"ocb_cont as-input"},U={class:"ie-ellipsis text-center"};function $(e,t,J,K,_,i){const x=u("slide"),y=u("carousel-3d"),b=u("devoir"),k=u("el-calendar");return n(),l(N,{padding:"",class:"page-content"},{default:s(()=>[a("div",T,[(i.eleve,h("",!0)),i.slides.length?(n(),p("div",j,[r(d,{style:{"text-align":"center","font-weight":"bold"}},{default:s(()=>t[2]||(t[2]=[c("Actualités")])),_:1}),r(y,{width:300,border:0,autoplay:!0,autoplayTimeout:1e4,style:{"margin-top":"0px"},count:i.slides.length},{default:s(()=>[(n(!0),p(g,null,Q(i.slides,(o,w)=>(n(),l(x,{index:w,style:{width:"100%"}},{default:s(()=>[r(m,{flat:"",bordered:"",onClick:W=>e.go("/eleve/actualites/"+o.id)},{default:s(()=>[o.img?(n(),l(S,{key:0,src:o.img,style:{"max-height":"260px"},class:"bg-secondary"},{default:s(()=>[a("div",L,v(o.title),1)]),_:2},1032,["src"])):(n(),p(g,{key:1},[r(d,{class:"text-white text-bold text-center bg-secondary"},{default:s(()=>[c(v(o.title),1)]),_:2},1024),r(d,{class:"text-white ellipsis bg-secondary"},{default:s(()=>[c(v(o.contenu),1)]),_:2},1024)],64))]),_:2},1032,["onClick"])]),_:2},1032,["index"]))),256))]),_:1},8,["count"])])):h("",!0),e.devoirsAvenir&&e.devoirsAvenir.data.length?(n(),p("div",E,[r(m,{class:"q-mb-md"},{default:s(()=>[r(d,{style:{"text-align":"center","font-weight":"bold"}},{default:s(()=>t[3]||(t[3]=[c("Travail à faire pour les prochains jours")])),_:1}),e.devoirsAvenir&&e.devoirsAvenir.data.length?(n(),l(b,{key:0,devoirs:e.devoirsAvenir.data},null,8,["devoirs"])):(n(),l(d,{key:1},{default:s(()=>t[4]||(t[4]=[c(" Aucun travail à faire ")])),_:1}))]),_:1})])):h("",!0),a("div",z,[r(m,{class:"q-mb-md"},{default:s(()=>[a("div",F,[a("div",O,[a("div",q,[a("i",{class:"icon_angle_left btnImage text-white",style:{flex:"none"},onClick:t[0]||(t[0]=(...o)=>i.avant&&i.avant(...o))}),a("div",G,[a("div",H,[a("div",R,[a("div",U,v(i.format(_.date,"E dd MMM")),1)])])]),a("i",{r:"",class:"icon_angle_right btnImage text-white",style:{flex:"none"},onClick:t[1]||(t[1]=(...o)=>i.apres&&i.apres(...o))})])])]),r(k,{events:e.emploi,date:_.date,annee:i.annee},null,8,["events","date","annee"])]),_:1})])])]),_:1})}const me=A(I,[["render",$]]);export{me as default};
