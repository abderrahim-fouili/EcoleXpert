import{B as h,a4 as i,S as r,a8 as e,R as p,ab as l,ad as a,a9 as f,aa as D}from"./index-Bl2lQPd7.js";const b={class:"invoice-container"},A={class:"pdf-page page-1"},N={class:"invoice-header"},I={class:"logo-section"},E={class:"logo-placeholder"},S=["src"],T={class:"school-info"},k={key:0,class:"partner-logo-section"},C=["src"],q={class:"school-year"},L={class:"invoice-meta"},F={class:"meta-left"},U={class:"meta-right"},B={class:"summary-table"},P={class:"amount"},M={class:"amount"},x={class:"invoice-items"},Y={class:"items-table"},R={colspan:"3",style:{"background-color":"#F8F8F8"}},w={style:{"font-weight":"bold"}},O={style:{"font-size":"85%"}},V={class:"amount"},j={key:0},z={class:"amount"},Z={colspan:"2",class:"footer-label total"},Q={class:"amount total"},G={class:"pdf-page page-2"},K={class:"payment-details"},W={class:"due-date-info"},H={class:"payment-methods"},J={class:"method method-card"},X={class:"method method-online-box"},$={class:"qr-code-placeholder"},_=["src"],ee={class:"method method-transfer"},te={class:"bank-details"},ne={class:"method method-cheque"},ae={__name:"Invoice",props:{invoiceData:{type:Object,required:!0,default:()=>({schoolYear:"YYYY/ZZZZ",documentNumber:"S0000000",documentDate:new Date().toISOString().split("T")[0],dueDate:new Date().toISOString().split("T")[0],recipient:{name:"Nom Destinataire",address:"Adresse Destinataire"},currency:"MAD",items:[]})},schoolInfo:{type:Object,default:()=>({name:"LYCEE FRANÇAIS GUY DE MAUPASSANT",addressLine1:"Quartier Almaz, Rocade Sud-Ouest",city:"Casablanca",contactEmail:"encaissements@lfmaupassant.com",paymentEmail:"encaissements@lfmaupassant.com",phone:"(+212) 522 65 43 00",logoUrl:"placeholder-logo-lycee.png"})},partnerInfo:{type:Object,default:()=>({logoUrl:"placeholder-logo-aefe.png",nameLine1:"Agence pour",nameLine2:"l'enseignement français",nameLine3:"à l'étranger"})},paymentDetails:{type:Object,required:!0,default:()=>({fatouratiId:"00000-00000-000",pinCode:"000000",onlinePaymentUrl:"https://ieg.eduka.school/finance/simplepay",qrCodeUrl:"placeholder-qr-code.png",bank:{accountName:"LYCEE FRANÇAIS GUY DE MAUPASSANT-PRIVE",bankName:"BMCE BANK - Agence Casa BVD TANTAN",iban:"011.793.0000.32.210.00.04160.83",swiftCode:"BMCE MA64"}})}},setup(n){const d=n,m=h(()=>!d.invoiceData.items||d.invoiceData.items.length===0?0:d.invoiceData.items.flatMap(t=>t.items&&Array.isArray(t.items)?t.items:[]).reduce((t,s)=>{const v=Number(s.solde)||0;return t+v},0)),y=h(()=>m.value),c=o=>{if(!o)return"";try{const t=new Date(o);return isNaN(t.getTime())?o:t.toLocaleDateString("fr-MA",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(t){return console.error("Error formatting date:",o,t),o}},u=(o,t)=>{typeof o!="number"&&(o=Number(o)||0);try{return new Intl.NumberFormat("fr-MA",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o)}catch(s){return console.error("Error formatting currency:",o,t,s),o.toFixed(2)}};return(o,t)=>(r(),i("div",b,[e("div",A,[e("header",N,[e("div",I,[e("div",E,[e("img",{src:n.schoolInfo.logoUrl||"placeholder-logo-lycee.png",style:{height:"60px"}},null,8,S)]),e("div",T,[e("h1",null,l(n.schoolInfo.name),1),e("p",null,[a(l(n.schoolInfo.addressLine1),1),t[0]||(t[0]=e("br",null,null,-1)),a(l(n.schoolInfo.city),1)]),e("p",null,"Email : "+l(n.schoolInfo.contactEmail),1),e("p",null,"Tél: "+l(n.schoolInfo.phone),1)])]),n.partnerInfo&&n.partnerInfo.logoUrl?(r(),i("div",k,[t[1]||(t[1]=e("div",{class:"etablissement-partenaire"},"ÉTABLISSEMENT PARTENAIRE",-1)),e("img",{src:n.partnerInfo.logoUrl||"placeholder-logo-aefe.png",class:"aefe-logo"},null,8,C)])):p("",!0)]),e("section",q,[e("h2",null,"Année scolaire / School year : "+l(n.invoiceData.schoolYear),1)]),e("section",L,[e("div",F,[e("p",null,[t[2]||(t[2]=e("strong",null,"Document #:",-1)),a(" "+l(n.invoiceData.documentNumber),1)]),e("p",null,[t[3]||(t[3]=e("strong",null,"Date document / Document date:",-1)),a(" "+l(c(n.invoiceData.documentDate)),1)]),e("p",null,[t[4]||(t[4]=e("strong",null,"Date d'échéance / Due date:",-1)),a(" "+l(c(n.invoiceData.dueDate)),1)])]),e("div",U,[t[5]||(t[5]=e("h2",{class:"invoice-title"},"Facture - Invoice",-1)),e("table",B,[e("tbody",null,[e("tr",null,[e("td",null,"Sous-total: ("+l(n.invoiceData.currency)+")",1),e("td",P,l(u(m.value,n.invoiceData.currency)),1)]),e("tr",null,[e("td",null,[e("strong",null,"Net à payer: ("+l(n.invoiceData.currency)+")",1)]),e("td",M,[e("strong",null,l(u(y.value,n.invoiceData.currency)),1)])])])])])]),e("section",x,[e("table",Y,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",null,"Frais"),e("th",null,"Période"),e("th",{class:"amount"},"TTC")])],-1)),e("tbody",null,[(r(!0),i(f,null,D(n.invoiceData.items,(s,v)=>(r(),i(f,{key:v},[e("tr",null,[e("td",R,[e("span",w,l(s.eleve_nom),1),e("span",O," ("+l(s.classe)+")",1)])]),(r(!0),i(f,null,D(s.items,(g,le)=>(r(),i("tr",null,[e("td",null,l(g.service_nom),1),e("td",null,l(g.periode),1),e("td",V,l(u(g.solde,n.invoiceData.currency)),1)]))),256))],64))),128)),!n.invoiceData.items||n.invoiceData.items.length===0?(r(),i("tr",j,t[6]||(t[6]=[e("td",{colspan:"3",style:{"text-align":"center"}},"Aucun élément de facturation.",-1)]))):p("",!0)]),e("tfoot",null,[e("tr",null,[t[7]||(t[7]=e("td",{colspan:"2",class:"footer-label"},"Sous-total",-1)),e("td",z,l(u(m.value,n.invoiceData.currency)),1)]),e("tr",null,[e("td",Z,[e("strong",null,"TOTAL: ("+l(n.invoiceData.currency)+")",1)]),e("td",Q,[e("strong",null,l(u(y.value,n.invoiceData.currency)),1)])])])])])]),e("div",G,[e("section",K,[t[26]||(t[26]=e("h3",null,"Détail paiement / payment details",-1)),e("p",W,[t[9]||(t[9]=a(" Cette facture est payable à la date d'échéance ")),e("strong",null,l(c(n.invoiceData.dueDate)),1),t[10]||(t[10]=a(" / Payment due by ")),e("strong",null,l(c(n.invoiceData.dueDate)),1)]),e("div",H,[e("div",J,[t[11]||(t[11]=e("h4",null,"1. Paiement par carte bancaire / en ligne / Fatourati:",-1)),e("p",null,"Le paiement par carte bancaire ainsi que le paiement en ligne ("+l(n.invoiceData.currency)+" Uniquement) sont fonctionnels.",1)]),e("div",X,[t[12]||(t[12]=e("p",null,[e("strong",null,"Pour consulter et payer vos factures en ligne :")],-1)),t[13]||(t[13]=e("p",null,"Afin de régler votre facture par carte bancaire, veuillez scanner le code QR pour accéder à l'application mobile, puis vous connecter à l'aide de votre identifiant et de votre mot de passe. ",-1)),e("div",$,[e("img",{src:n.paymentDetails.qrCodeUrl||"placeholder-qr-code.png",alt:"QR Code",style:{width:"100px",height:"100px"}},null,8,_)])]),e("div",ee,[t[20]||(t[20]=e("h4",null,"2. Paiement par virement :",-1)),t[21]||(t[21]=e("p",null,"merci de nous en informer.",-1)),e("ul",null,[t[15]||(t[15]=e("li",null,"mentionner le nom et le prénom de l'élève avec la classe pour l'identification du virement.",-1)),e("li",null,[t[14]||(t[14]=a("envoyer à l'établissement une copie de l'accusé de réception ou de l'avis de débit à l'adresse suivante : ")),e("strong",null,l(n.schoolInfo.paymentEmail||n.schoolInfo.contactEmail),1)])]),e("div",te,[e("p",null,[t[16]||(t[16]=e("strong",null,"Account Name / Titulaire du compte:",-1)),a(" "+l(n.paymentDetails.bank.accountName),1)]),e("p",null,[t[17]||(t[17]=e("strong",null,"Bank Name/Nom Banque:",-1)),a(" "+l(n.paymentDetails.bank.bankName),1)]),e("p",null,[t[18]||(t[18]=e("strong",null,"IBAN:",-1)),a(" "+l(n.paymentDetails.bank.iban),1)]),e("p",null,[t[19]||(t[19]=e("strong",null,"SWIFT Code:",-1)),a(" "+l(n.paymentDetails.bank.swiftCode),1)])])]),e("div",ne,[e("h4",null,"3-Paiement par chèque "+l(n.invoiceData.currency)+":",1),e("p",null,[t[22]||(t[22]=a("Le chèque devra être libellé à l'ordre de : ")),e("strong",null,l(n.paymentDetails.bank.accountName),1)]),t[23]||(t[23]=e("p",null,"Merci de regrouper en un seul chèque le paiement pour une même fratrie, en mentionnant au dos du chèque le nom et prénom des élèves avec la classe.",-1)),t[24]||(t[24]=e("p",null,"Les chèques peuvent être déposés chez les agents des encaissements à l'établissement.",-1))]),t[25]||(t[25]=e("div",{class:"method method-cash"},[e("h4",null,"4. Paiement en espèces :"),e("p",null," Les règlements en espèces peuvent être effectués auprès du service comptabilité durant les heures d’ouverture de l’école. Un reçu vous sera remis immédiatement après paiement. ")],-1))])])])]))}};export{ae as default};
